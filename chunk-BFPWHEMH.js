import{a as B}from"./chunk-7CTIQQW7.js";import{a as ee,b as ie}from"./chunk-FDERIQAA.js";var At,se,re,V={};V.n=l=>{var t=l&&l.__esModule?()=>l.default:()=>l;return V.d(t,{a:t}),t},V.d=(l,t)=>{for(var e in t)V.o(t,e)&&!V.o(l,e)&&Object.defineProperty(l,e,{enumerable:!0,get:t[e]})},V.o=(l,t)=>Object.prototype.hasOwnProperty.call(l,t);var Pi=B,ot=V.n(Pi),Ti=B.Axis,ke=V.n(Ti),Li=B.Color,Se=V.n(Li),{parse:jt}=Se(),{addEvent:it,extend:Ae,merge:Ai,pick:ji,splat:zi}=ot();(function(l){let t;function e(){let{userOptions:c}=this;this.colorAxis=[],c.colorAxis&&(c.colorAxis=zi(c.colorAxis),c.colorAxis.map(m=>new t(this,m)))}function i(c){let m=this.chart.colorAxis||[],b=y=>{let x=c.allItems.indexOf(y);x!==-1&&(this.destroyItem(c.allItems[x]),c.allItems.splice(x,1))},u=[],f,g;for(m.forEach(function(y){f=y.options,f?.showInLegend&&(f.dataClasses&&f.visible?u=u.concat(y.getDataClassLegendSymbols()):f.visible&&u.push(y),y.series.forEach(function(x){(!x.options.showInLegend||f.dataClasses)&&(x.options.legendType==="point"?x.points.forEach(function(M){b(M)}):b(x))}))}),g=u.length;g--;)c.allItems.unshift(u[g])}function o(c){c.visible&&c.item.legendColor&&c.item.legendItem.symbol.attr({fill:c.item.legendColor})}function r(c){this.chart.colorAxis?.forEach(m=>{m.update({},c.redraw)})}function n(){(this.chart.colorAxis?.length||this.colorAttribs)&&this.translateColors()}function s(){let c=this.axisTypes;c?c.indexOf("colorAxis")===-1&&c.push("colorAxis"):this.axisTypes=["colorAxis"]}function a(c){let m=this,b=c?"show":"hide";m.visible=m.options.visible=!!c,["graphic","dataLabel"].forEach(function(u){m[u]&&m[u][b]()}),this.series.buildKDTree()}function h(){let c=this,m=this.getPointsCollection(),b=this.options.nullColor,u=this.colorAxis,f=this.colorKey;m.forEach(g=>{let y=g.getNestedProperty(f),x=g.options.color||(g.isNull||g.value===null?b:u&&y!==void 0?u.toColor(y,g):g.color||c.color);x&&g.color!==x&&(g.color=x,c.options.legendType==="point"&&g.legendItem&&g.legendItem.label&&c.chart.legend.colorizeItem(g,g.visible))})}function p(){this.elem.attr("fill",jt(this.start).tweenTo(jt(this.end),this.pos),void 0,!0)}function d(){this.elem.attr("stroke",jt(this.start).tweenTo(jt(this.end),this.pos),void 0,!0)}l.compose=function(c,m,b,u,f){let g=m.prototype,y=b.prototype,x=f.prototype;g.collectionsWithUpdate.includes("colorAxis")||(t=c,g.collectionsWithUpdate.push("colorAxis"),g.collectionsWithInit.colorAxis=[g.addColorAxis],it(m,"afterCreateAxes",e),function(M){let w=M.prototype.createAxis;M.prototype.createAxis=function(C,T){if(C!=="colorAxis")return w.apply(this,arguments);let D=new t(this,Ai(T.axis,{index:this[C].length,isX:!1}));return this.isDirtyLegend=!0,this.axes.forEach(P=>{P.series=[]}),this.series.forEach(P=>{P.bindAxes(),P.isDirtyData=!0}),ji(T.redraw,!0)&&this.redraw(T.animation),D}}(m),y.fillSetter=p,y.strokeSetter=d,it(u,"afterGetAllItems",i),it(u,"afterColorizeItem",o),it(u,"afterUpdate",r),Ae(x,{optionalAxis:"colorAxis",translateColors:h}),Ae(x.pointClass.prototype,{setVisible:a}),it(f,"afterTranslate",n,{order:1}),it(f,"bindAxes",s))},l.pointSetVisible=a})(se||(se={}));var ki=se,{parse:oe}=Se(),{merge:Si}=ot();(At=re||(re={})).initDataClasses=function(l){let t=this.chart,e=this.legendItem=this.legendItem||{},i=this.options,o=l.dataClasses||[],r,n,s=t.options.chart.colorCount,a=0,h;this.dataClasses=n=[],e.labels=[];for(let p=0,d=o.length;p<d;++p)r=Si(r=o[p]),n.push(r),(t.styledMode||!r.color)&&(i.dataClassColor==="category"?(t.styledMode||(s=(h=t.options.colors||[]).length,r.color=h[a]),r.colorIndex=a,++a===s&&(a=0)):r.color=oe(i.minColor).tweenTo(oe(i.maxColor),d<2?.5:p/(d-1)))},At.initStops=function(){let l=this.options,t=this.stops=l.stops||[[0,l.minColor||""],[1,l.maxColor||""]];for(let e=0,i=t.length;e<i;++e)t[e].color=oe(t[e][1])},At.normalizedValue=function(l){let t=this.max||0,e=this.min||0;return this.logarithmic&&(l=this.logarithmic.log2lin(l)),1-(t-l)/(t-e||1)},At.toColor=function(l,t){let e,i,o,r,n,s,a=this.dataClasses,h=this.stops;if(a){for(s=a.length;s--;)if(i=(n=a[s]).from,o=n.to,(i===void 0||l>=i)&&(o===void 0||l<=o)){r=n.color,t&&(t.dataClass=s,t.colorIndex=n.colorIndex);break}}else{for(e=this.normalizedValue(l),s=h.length;s--&&!(e>h[s][0]););i=h[s]||h[s+1],e=1-((o=h[s+1]||i)[0]-e)/(o[0]-i[0]||1),r=i.color.tweenTo(o.color,e)}return r};var Ii=re,Bi=B.LegendSymbol,Di=V.n(Bi),Oi=B.SeriesRegistry,Ei=V.n(Oi),{defaultOptions:ae}=ot(),{series:je}=Ei(),{defined:zt,extend:Ie,fireEvent:Vi,isArray:Xi,isNumber:Ni,merge:Be,pick:G,relativeLength:ze}=ot();ae.colorAxis=Be(ae.xAxis,{lineWidth:0,minPadding:0,maxPadding:0,gridLineColor:"#ffffff",gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:.01,color:"#999999"},labels:{distance:8,overflow:"justify",rotation:0},minColor:"#e6e9ff",maxColor:"#0022ff",tickLength:5,showInLegend:!0});var K=class l extends ke(){static compose(t,e,i,o){ki.compose(l,t,e,i,o)}constructor(t,e){super(t,e),this.coll="colorAxis",this.visible=!0,this.init(t,e)}init(t,e){let i=t.options.legend||{},o=e.layout?e.layout!=="vertical":i.layout!=="vertical";this.side=e.side||o?2:1,this.reversed=e.reversed,this.opposite=!o,super.init(t,e,"colorAxis"),this.userOptions=e,Xi(t.userOptions.colorAxis)&&(t.userOptions.colorAxis[this.index]=e),e.dataClasses&&this.initDataClasses(e),this.initStops(),this.horiz=o,this.zoomEnabled=!1}hasData(){return!!(this.tickPositions||[]).length}setTickPositions(){if(!this.dataClasses)return super.setTickPositions()}setOptions(t){let e=Be(ae.colorAxis,t,{showEmpty:!1,title:null,visible:this.chart.options.legend.enabled&&t.visible!==!1});super.setOptions(e),this.options.crosshair=this.options.marker}setAxisSize(){let t=this.chart,e=this.legendItem?.symbol,{width:i,height:o}=this.getSize();e&&(this.left=+e.attr("x"),this.top=+e.attr("y"),this.width=i=+e.attr("width"),this.height=o=+e.attr("height"),this.right=t.chartWidth-this.left-i,this.bottom=t.chartHeight-this.top-o,this.pos=this.horiz?this.left:this.top),this.len=(this.horiz?i:o)||l.defaultLegendLength}getOffset(){let t=this.legendItem?.group,e=this.chart.axisOffset[this.side];if(t){this.axisParent=t,super.getOffset();let i=this.chart.legend;i.allItems.forEach(function(o){o instanceof l&&o.drawLegendSymbol(i,o)}),i.render(),this.chart.getMargins(!0),this.chart.series.some(o=>o.isDrilling)||(this.isDirty=!0),this.added||(this.added=!0),this.labelLeft=0,this.labelRight=this.width,this.chart.axisOffset[this.side]=e}}setLegendColor(){let t=this.horiz,e=this.reversed,i=+!!e,o=+!e,r=t?[i,0,o,0]:[0,o,0,i];this.legendColor={linearGradient:{x1:r[0],y1:r[1],x2:r[2],y2:r[3]},stops:this.stops}}drawLegendSymbol(t,e){let i=e.legendItem||{},o=t.padding,r=t.options,n=this.options.labels,s=G(r.itemDistance,10),a=this.horiz,{width:h,height:p}=this.getSize(),d=G(r.labelPadding,a?16:30);this.setLegendColor(),i.symbol||(i.symbol=this.chart.renderer.symbol("roundedRect").attr({r:r.symbolRadius??3,zIndex:1}).add(i.group)),i.symbol.attr({x:0,y:(t.baseline||0)-11,width:h,height:p}),i.labelWidth=h+o+(a?s:G(n.x,n.distance)+(this.maxLabelLength||0)),i.labelHeight=p+o+(a?d:0)}setState(t){this.series.forEach(function(e){e.setState(t)})}setVisible(){}getSeriesExtremes(){let t=this.series,e,i,o,r,n=t.length;for(this.dataMin=1/0,this.dataMax=-1/0;n--;){for(let s of(i=(r=t[n]).colorKey=G(r.options.colorKey,r.colorKey,r.pointValKey,r.zoneAxis,"y"),o=r[i+"Min"]&&r[i+"Max"],[i,"value","y"]))if((e=r.getColumn(s)).length)break;if(o)r.minColorValue=r[i+"Min"],r.maxColorValue=r[i+"Max"];else{let s=je.prototype.getExtremes.call(r,e);r.minColorValue=s.dataMin,r.maxColorValue=s.dataMax}zt(r.minColorValue)&&zt(r.maxColorValue)&&(this.dataMin=Math.min(this.dataMin,r.minColorValue),this.dataMax=Math.max(this.dataMax,r.maxColorValue)),o||je.prototype.applyExtremes.call(r)}}drawCrosshair(t,e){let i,o=this.legendItem||{},r=e?.plotX,n=e?.plotY,s=this.pos,a=this.len;e&&((i=this.toPixels(e.getNestedProperty(e.series.colorKey)))<s?i=s-2:i>s+a&&(i=s+a+2),e.plotX=i,e.plotY=this.len-i,super.drawCrosshair(t,e),e.plotX=r,e.plotY=n,this.cross&&!this.cross.addedToColorAxis&&o.group&&(this.cross.addClass("highcharts-coloraxis-marker").add(o.group),this.cross.addedToColorAxis=!0,this.chart.styledMode||typeof this.crosshair!="object"||this.cross.attr({fill:this.crosshair.color})))}getPlotLinePath(t){let e=this.left,i=t.translatedValue,o=this.top;return Ni(i)?this.horiz?[["M",i-4,o-6],["L",i+4,o-6],["L",i,o],["Z"]]:[["M",e,i],["L",e-6,i+6],["L",e-6,i-6],["Z"]]:super.getPlotLinePath(t)}update(t,e){let i=this.chart.legend;this.series.forEach(o=>{o.isDirtyData=!0}),(t.dataClasses&&i.allItems||this.dataClasses)&&this.destroyItems(),super.update(t,e),this.legendItem?.label&&(this.setLegendColor(),i.colorizeItem(this,!0))}destroyItems(){let t=this.chart,e=this.legendItem||{};if(e.label)t.legend.destroyItem(this);else if(e.labels)for(let i of e.labels)t.legend.destroyItem(i);t.isDirtyLegend=!0}destroy(){this.chart.isDirtyLegend=!0,this.destroyItems(),super.destroy(...[].slice.call(arguments))}remove(t){this.destroyItems(),super.remove(t)}getDataClassLegendSymbols(){let t,e=this,i=e.chart,o=e.legendItem&&e.legendItem.labels||[],r=i.options.legend,n=G(r.valueDecimals,-1),s=G(r.valueSuffix,""),a=h=>e.series.reduce((p,d)=>(p.push(...d.points.filter(c=>c.dataClass===h)),p),[]);return o.length||e.dataClasses.forEach((h,p)=>{let d=h.from,c=h.to,{numberFormatter:m}=i,b=!0;t="",d===void 0?t="< ":c===void 0&&(t="> "),d!==void 0&&(t+=m(d,n)+s),d!==void 0&&c!==void 0&&(t+=" - "),c!==void 0&&(t+=m(c,n)+s),o.push(Ie({chart:i,name:t,options:{},drawLegendSymbol:Di().rectangle,visible:!0,isDataClass:!0,setState:u=>{for(let f of a(p))f.setState(u)},setVisible:function(){this.visible=b=e.visible=!b;let u=[];for(let f of a(p))f.setVisible(b),f.hiddenInDataClass=!b,u.indexOf(f.series)===-1&&u.push(f.series);i.legend.colorizeItem(this,b),u.forEach(f=>{Vi(f,"afterDataClassLegendClick")})}},h))}),o}getSize(){let{chart:t,horiz:e}=this,{height:i,width:o}=this.options,{legend:r}=t.options;return{width:G(zt(o)?ze(o,t.chartWidth):void 0,r?.symbolWidth,e?l.defaultLegendLength:12),height:G(zt(i)?ze(i,t.chartHeight):void 0,r?.symbolHeight,e?12:l.defaultLegendLength)}}};K.defaultLegendLength=200,K.keepProps=["legendItem"],Ie(K.prototype,Ii),Array.prototype.push.apply(ke().keepProps,K.keepProps);var H=ot();H.ColorAxis=H.ColorAxis||K,H.ColorAxis.compose(H.Chart,H.Fx,H.Legend,H.Series);var Js=ot();var Ut,De,kt,St,ge,fe,be,ye,xe,S={};S.n=l=>{var t=l&&l.__esModule?()=>l.default:()=>l;return S.d(t,{a:t}),t},S.d=(l,t)=>{for(var e in t)S.o(t,e)&&!S.o(l,e)&&Object.defineProperty(l,e,{enumerable:!0,get:t[e]})},S.o=(l,t)=>Object.prototype.hasOwnProperty.call(l,t);var Yi=B,v=S.n(Yi);S.d({},{});var Gi={lang:{zoomIn:"Zoom in",zoomOut:"Zoom out"},mapNavigation:{buttonOptions:{alignTo:"plotBox",align:"left",verticalAlign:"top",x:0,width:18,height:18,padding:5,style:{color:"#666666",fontSize:"1em",fontWeight:"bold"},theme:{fill:"#ffffff",stroke:"#e6e6e6","stroke-width":1,"text-align":"center"}},buttons:{zoomIn:{onclick:function(){this.mapZoom(.5)},text:"+",y:0},zoomOut:{onclick:function(){this.mapZoom(2)},text:"-",y:28}},mouseWheelSensitivity:1.1}},{defined:Wi,extend:Oe,pick:Fi,wrap:Ee}=v();(function(l){let t,e=0;function i(s){let a=this.chart;s=this.normalize(s),a.options.mapNavigation.enableDoubleClickZoomTo?a.pointer.inClass(s.target,"highcharts-tracker")&&a.hoverPoint&&a.hoverPoint.zoomTo():a.isInsidePlot(s.chartX-a.plotLeft,s.chartY-a.plotTop)&&a.mapZoom(.5,void 0,void 0,s.chartX,s.chartY)}function o(s){let a=this.chart,h=Wi((s=this.normalize(s)).wheelDelta)&&-s.wheelDelta/120||s.deltaY||s.detail;Math.abs(h)>=1&&(e+=Math.abs(h),t&&clearTimeout(t),t=setTimeout(()=>{e=0},50)),e<10&&a.isInsidePlot(s.chartX-a.plotLeft,s.chartY-a.plotTop)&&a.mapView&&a.mapView.zoomBy(-((a.options.mapNavigation.mouseWheelSensitivity-1)*h),void 0,[s.chartX,s.chartY],!(1>Math.abs(h))&&void 0)}function r(s,a,h){let p=this.chart;if(a=s.call(this,a,h),p&&p.mapView){let d=p.mapView.pixelsToLonLat({x:a.chartX-p.plotLeft,y:a.chartY-p.plotTop});d&&Oe(a,d)}return a}function n(s){let a=this.chart.options.mapNavigation;a&&Fi(a.enableTouchZoom,a.enabled)&&(this.chart.zooming.pinchType="xy"),s.apply(this,[].slice.call(arguments,1))}l.compose=function(s){let a=s.prototype;a.onContainerDblClick||(Oe(a,{onContainerDblClick:i,onContainerMouseWheel:o}),Ee(a,"normalize",r),Ee(a,"zoomOption",n))}})(ge||(ge={}));var Ri=ge;function Ui(l,t,e,i,o){if(o){let r=o?.r||0;o.brBoxY=t-r,o.brBoxHeight=i+r}return Ut.roundedRect(l,t,e,i,o)}function Zi(l,t,e,i,o){if(o){let r=o?.r||0;o.brBoxHeight=i+r}return Ut.roundedRect(l,t,e,i,o)}var Hi=function(l){(Ut=l.prototype.symbols).bottombutton=Ui,Ut.topbutton=Zi},{setOptions:Ki}=v(),{composed:qi}=v(),{addEvent:st,extend:Ve,merge:ne,objectEach:$i,pick:le,pushUnique:Ji}=v();function he(l){l&&(l.preventDefault?.(),l.stopPropagation?.(),l.cancelBubble=!0)}var Zt=class l{static compose(t,e,i){Ri.compose(e),Hi(i),Ji(qi,"Map.Navigation")&&(st(t,"beforeRender",function(){this.mapNavigation=new l(this),this.mapNavigation.update()}),Ki(Gi))}constructor(t){this.chart=t,this.navButtons=[]}update(t){let e=this,i=e.chart,o=e.navButtons,r=function(s){this.handler.call(i,s),he(s)},n=i.options.mapNavigation;for(t&&(n=i.options.mapNavigation=ne(i.options.mapNavigation,t));o.length;)o.pop()?.destroy();if(!i.renderer.forExport&&le(n.enableButtons,n.enabled)){e.navButtonsGroup||(e.navButtonsGroup=i.renderer.g().attr({zIndex:7}).add()),$i(n.buttons,(a,h)=>{let p={padding:(a=ne(n.buttonOptions,a)).padding};!i.styledMode&&a.theme&&(Ve(p,a.theme),p.style=ne(a.theme.style,a.style));let{text:d,width:c=0,height:m=0,padding:b=0}=a,u=i.renderer.button(d!=="+"&&d!=="-"&&d||"",0,0,r,p,void 0,void 0,void 0,h==="zoomIn"?"topbutton":"bottombutton").addClass("highcharts-map-navigation highcharts-"+{zoomIn:"zoom-in",zoomOut:"zoom-out"}[h]).attr({width:c,height:m,title:i.options.lang[h],zIndex:5}).add(e.navButtonsGroup);if(d==="+"||d==="-"){let f=c+1,g=[["M",b+3,b+m/2],["L",b+f-3,b+m/2]];d==="+"&&g.push(["M",b+f/2,b+3],["L",b+f/2,b+m-3]),i.renderer.path(g).addClass("highcharts-button-symbol").attr(i.styledMode?{}:{stroke:a.style?.color,"stroke-width":3,"stroke-linecap":"round"}).add(u)}if(u.handler=a.onclick,st(u.element,"dblclick",he),o.push(u),Ve(a,{width:u.width,height:2*(u.height||0)}),i.hasLoaded)u.align(a,!1,a.alignTo);else{let f=st(i,"load",()=>{u.element&&u.align(a,!1,a.alignTo),f()})}});let s=(a,h)=>!(h.x>=a.x+a.width||h.x+h.width<=a.x||h.y>=a.y+a.height||h.y+h.height<=a.y);i.hasLoaded||st(i,"render",function(){let a=i.exporting?.group?.getBBox();if(a){let h=e.navButtonsGroup.getBBox();if(s(a,h)){let p=-h.y-h.height+a.y-5,d=a.y+a.height-h.y+5,c=n.buttonOptions&&n.buttonOptions.verticalAlign;e.navButtonsGroup.attr({translateY:c==="bottom"?p:d})}}})}this.updateEvents(n)}updateEvents(t){let e=this.chart;le(t.enableDoubleClickZoom,t.enabled)||t.enableDoubleClickZoomTo?this.unbindDblClick=this.unbindDblClick||st(e.container,"dblclick",function(i){e.pointer.onContainerDblClick(i)}):this.unbindDblClick&&(this.unbindDblClick=this.unbindDblClick()),le(t.enableMouseWheelZoom,t.enabled)?this.unbindMouseWheel=this.unbindMouseWheel||st(e.container,"wheel",function(i){if(!e.pointer.inClass(i.target,"highcharts-no-mousewheel")){let o=e.mapView?.zoom;e.pointer.onContainerMouseWheel(i),o!==e.mapView?.zoom&&he(i)}return!1}):this.unbindMouseWheel&&(this.unbindMouseWheel=this.unbindMouseWheel())}},Qi=B.SeriesRegistry,I=S.n(Qi),_i=B.SVGElement,to=S.n(_i),{column:{prototype:eo}}=I().seriesTypes,{addEvent:io,defined:oo}=v(),pe=fe||(fe={});function so(l){let t=this.series,e=t.chart.renderer;this.moveToTopOnHover&&this.graphic&&(t.stateMarkerGraphic||(t.stateMarkerGraphic=new(to())(e,"use").css({pointerEvents:"none"}).add(this.graphic.parentGroup)),l?.state==="hover"?(this.graphic.attr({id:this.id}),t.stateMarkerGraphic.attr({href:`${e.url}#${this.id}`,visibility:"visible"})):t.stateMarkerGraphic.attr({href:""}))}pe.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return this.value!==null&&this.value!==1/0&&this.value!==-1/0&&(this.value===void 0||!isNaN(this.value))}},pe.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(l){let t={};return oo(l.color)&&(!l.state||l.state==="normal")&&(t[this.colorProp||"fill"]=l.color),t},pointAttribs:eo.pointAttribs},pe.compose=function(l){return io(l.prototype.pointClass,"afterSetState",so),l};var k=fe,ro=B.Series,ao=S.n(ro),{deg2rad:Xe}=v(),{fireEvent:no,isNumber:de,pick:It,relativeLength:lo}=v();(De=be||(be={})).getCenter=function(){let l=this.options,t=this.chart,e=2*(l.slicedOffset||0),i=t.plotWidth-2*e,o=t.plotHeight-2*e,r=l.center,n=Math.min(i,o),s=l.thickness,a,h=l.size,p=l.innerSize||0,d,c;typeof h=="string"&&(h=parseFloat(h)),typeof p=="string"&&(p=parseFloat(p));let m=[It(r?.[0],"50%"),It(r?.[1],"50%"),It(h&&h<0?void 0:l.size,"100%"),It(p&&p<0?void 0:l.innerSize||0,"0%")];for(!t.angular||this instanceof ao()||(m[3]=0),d=0;d<4;++d)c=m[d],a=d<2||d===2&&/%$/.test(c),m[d]=lo(c,[i,o,n,m[2]][d])+(a?e:0);return m[3]>m[2]&&(m[3]=m[2]),de(s)&&2*s<m[2]&&s>0&&(m[3]=m[2]-2*s),no(this,"afterGetCenter",{positions:m}),m},De.getStartAndEndRadians=function(l,t){let e=de(l)?l:0,i=de(t)&&t>e&&t-e<360?t:e+360;return{start:Xe*(e+-90),end:Xe*(i+-90)}};var ho=be,po=B.Chart,co=S.n(po),uo=B.SVGRenderer,Pe=S.n(uo),{getOptions:mo}=v(),{isNumber:ut,merge:go,pick:Ne}=v(),Tt=class extends co(){init(t,e){let i=mo().credits,o=go({chart:{panning:{enabled:!0,type:"xy"},type:"map"},credits:{mapText:Ne(i.mapText,' \xA9 <a href="{geojson.copyrightUrl}">{geojson.copyrightShort}</a>'),mapTextFull:Ne(i.mapTextFull,"{geojson.copyright}")},mapView:{},tooltip:{followTouchMove:!1}},t);super.init(o,e)}mapZoom(t,e,i,o,r){this.mapView&&(ut(t)&&(t=Math.log(t)/Math.log(.5)),this.mapView.zoomBy(t,ut(e)&&ut(i)?this.mapView.projection.inverse([e,i]):void 0,ut(o)&&ut(r)?[o,r]:void 0))}update(t){t.chart&&"map"in t.chart&&this.mapView?.recommendMapView(this,[t.chart.map,...(this.options.series||[]).map(e=>e.mapData)],!0),super.update.apply(this,arguments)}};(kt=Tt||(Tt={})).maps={},kt.mapChart=function(l,t,e){return new kt(l,t,e)},kt.splitPath=function(l){let t;return t=typeof l=="string"?(l=l.replace(/([A-Z])/gi," $1 ").replace(/^\s*/,"").replace(/\s*$/,"")).split(/[ ,;]+/).map(e=>/[A-Z]/i.test(e)?e:parseFloat(e)):l,Pe().prototype.pathToSegments(t)};var Ft=Tt,pi={boundsFromPath:function(l){let t=-Number.MAX_VALUE,e=Number.MAX_VALUE,i=-Number.MAX_VALUE,o=Number.MAX_VALUE,r;if(l.forEach(n=>{let s=n[n.length-2],a=n[n.length-1];typeof s=="number"&&typeof a=="number"&&(e=Math.min(e,s),t=Math.max(t,s),o=Math.min(o,a),i=Math.max(i,a),r=!0)}),r)return{x1:e,y1:o,x2:t,y2:i}}},{boundsFromPath:fo}=pi,bo=I().seriesTypes.scatter.prototype.pointClass,{extend:di,isNumber:mt,pick:Ye}=v(),pt=class l extends bo{static getProjectedPath(t,e){return t.projectedPath||(e&&t.geometry?(e.hasCoordinates=!0,t.projectedPath=e.path(t.geometry)):t.projectedPath=t.path),t.projectedPath||[]}applyOptions(t,e){let i=this.series,o=super.applyOptions(t,e),r=i.joinBy;if(i.mapData&&i.mapMap){let n=r[1],s=super.getNestedProperty(n),a=s!==void 0&&i.mapMap[s];a?di(o,ie(ee({},a),{name:o.name??a.name})):i.pointArrayMap.indexOf("value")!==-1&&(o.value=o.value||null)}return o}getProjectedBounds(t){let e=fo(l.getProjectedPath(this,t)),i=this.properties,o=this.series.chart.mapView;if(e){let r=i?.["hc-middle-lon"],n=i?.["hc-middle-lat"];if(o&&mt(r)&&mt(n)){let s=t.forward([r,n]);e.midX=s[0],e.midY=s[1]}else{let s=i?.["hc-middle-x"],a=i?.["hc-middle-y"];e.midX=e.x1+(e.x2-e.x1)*Ye(this.middleX,mt(s)?s:.5);let h=Ye(this.middleY,mt(a)?a:.5);this.geometry||(h=1-h),e.midY=e.y2-(e.y2-e.y1)*h}return e}}onMouseOver(t){v().clearTimeout(this.colorInterval),!this.isNull&&this.visible||this.series.options.nullInteraction?super.onMouseOver.call(this,t):this.series.onMouseOut()}setVisible(t){this.visible=this.options.visible=!!t,this.dataLabel&&this.dataLabel[t?"show":"hide"](),this.graphic&&this.graphic.attr(this.series.pointAttribs(this))}zoomTo(t){let e=this.series.chart,i=e.mapView,o=this.bounds;if(i&&o){let r=mt(this.insetIndex)&&i.insets[this.insetIndex];if(r){let n=r.projectedUnitsToPixels({x:o.x1,y:o.y1}),s=r.projectedUnitsToPixels({x:o.x2,y:o.y2}),a=i.pixelsToProjectedUnits({x:n.x,y:n.y}),h=i.pixelsToProjectedUnits({x:s.x,y:s.y});o={x1:a.x,y1:a.y,x2:h.x,y2:h.y}}i.fitToBounds(o,void 0,!1),this.series.isDirty=!0,e.redraw(t)}}};di(pt.prototype,{dataLabelOnNull:k.pointMembers.dataLabelOnNull,moveToTopOnHover:k.pointMembers.moveToTopOnHover,isValid:k.pointMembers.isValid});var{isNumber:yo}=v(),xo={center:[0,0],fitToGeometry:void 0,maxZoom:void 0,padding:0,projection:{name:void 0,parallels:void 0,rotation:void 0},zoom:void 0,insetOptions:{borderColor:"#cccccc",borderWidth:1,padding:"10%",relativeTo:"mapBoundingBox",units:"percent"}},Mo=B.Templating,ci=S.n(Mo),{win:Ge}=v(),{format:We}=ci(),{error:Fe,extend:vo,merge:wo,wrap:Co}=v();(function(l){function t(s){return this.mapView&&this.mapView.lonLatToProjectedUnits(s)}function e(s){return this.mapView&&this.mapView.projectedUnitsToLonLat(s)}function i(s,a){let h=this.options.chart.proj4||Ge.proj4;if(!h)return void Fe(21,!1,this);let{jsonmarginX:p=0,jsonmarginY:d=0,jsonres:c=1,scale:m=1,xoffset:b=0,xpan:u=0,yoffset:f=0,ypan:g=0}=a,y=h(a.crs,[s.lon,s.lat]),x=a.cosAngle||a.rotation&&Math.cos(a.rotation),M=a.sinAngle||a.rotation&&Math.sin(a.rotation),w=a.rotation?[y[0]*x+y[1]*M,-y[0]*M+y[1]*x]:y;return{x:((w[0]-b)*m+u)*c+p,y:-(((f-w[1])*m+g)*c-d)}}function o(s,a){let h=this.options.chart.proj4||Ge.proj4;if(!h)return void Fe(21,!1,this);if(s.y===null)return;let{jsonmarginX:p=0,jsonmarginY:d=0,jsonres:c=1,scale:m=1,xoffset:b=0,xpan:u=0,yoffset:f=0,ypan:g=0}=a,y={x:((s.x-p)/c-u)/m+b,y:((s.y-d)/c+g)/m+f},x=a.cosAngle||a.rotation&&Math.cos(a.rotation),M=a.sinAngle||a.rotation&&Math.sin(a.rotation),w=h(a.crs,"WGS84",a.rotation?{x:y.x*x+-(y.y*M),y:y.x*M+y.y*x}:y);return{lat:w.y,lon:w.x}}function r(s,a){a||(a=Object.keys(s.objects)[0]);let h=s.objects[a];if(h["hc-decoded-geojson"]&&h["hc-decoded-geojson"].title===s.title)return h["hc-decoded-geojson"];let p=s.arcs;if(s.transform){let u,f,g,y=s.arcs,{scale:x,translate:M}=s.transform;p=[];for(let w=0,C=y.length;w<C;++w){let T=y[w];p.push(u=[]),f=0,g=0;for(let D=0,P=T.length;D<P;++D)u.push([(f+=T[D][0])*x[0]+M[0],(g+=T[D][1])*x[1]+M[1]])}}let d=u=>typeof u[0]=="number"?u.reduce((f,g,y)=>{let x=g<0?p[~g]:p[g];return g<0?(x=x.slice(0,y===0?x.length:x.length-1)).reverse():y&&(x=x.slice(1)),f.concat(x)},[]):u.map(d),c=h.geometries,m=[];for(let u=0,f=c.length;u<f;++u)m.push({type:"Feature",properties:c[u].properties,geometry:{type:c[u].type,coordinates:c[u].coordinates||d(c[u].arcs)}});let b={type:"FeatureCollection",copyright:s.copyright,copyrightShort:s.copyrightShort,copyrightUrl:s.copyrightUrl,features:m,"hc-recommended-mapview":h["hc-recommended-mapview"],bbox:s.bbox,title:s.title};return h["hc-decoded-geojson"]=b,b}function n(s,a){a=wo(!0,this.options.credits,a),s.call(this,a),this.credits&&this.mapCreditsFull&&this.credits.attr({title:this.mapCreditsFull})}l.compose=function(s){let a=s.prototype;a.transformFromLatLon||(a.fromLatLonToPoint=t,a.fromPointToLatLon=e,a.transformFromLatLon=i,a.transformToLatLon=o,Co(a,"addCredits",n))},l.geojson=function(s,a="map",h){let p=[],d=s.type==="Topology"?r(s):s,c=d.features;for(let m=0,b=c.length;m<b;++m){let u,f=c[m],g=f.geometry||{},y=g.type,x=g.coordinates,M=f.properties;if((a==="map"||a==="mapbubble")&&(y==="Polygon"||y==="MultiPolygon")||a==="mapline"&&(y==="LineString"||y==="MultiLineString")?x.length&&(u={geometry:{coordinates:x,type:y}}):a==="mappoint"&&y==="Point"&&x.length&&(u={geometry:{coordinates:x,type:y}}),u){let w=M&&(M.name||M.NAME),C=M&&M.lon,T=M&&M.lat;p.push(vo(u,{lat:typeof T=="number"?T:void 0,lon:typeof C=="number"?C:void 0,name:typeof w=="string"?w:void 0,properties:M}))}}return h&&d.copyrightShort&&(h.chart.mapCredits=We(h.chart.options.credits?.mapText,{geojson:d}),h.chart.mapCreditsFull=We(h.chart.options.credits?.mapTextFull,{geojson:d})),p},l.topo2geo=r})(ye||(ye={}));var Rt=ye;(St=xe||(xe={})).getCenterOfPoints=function(l){let t=l.reduce((e,i)=>(e.x+=i.x,e.y+=i.y,e),{x:0,y:0});return{x:t.x/l.length,y:t.y/l.length}},St.getDistanceBetweenPoints=function(l,t){return Math.sqrt(Math.pow(t.x-l.x,2)+Math.pow(t.y-l.y,2))},St.getAngleBetweenPoints=function(l,t){return Math.atan2(t.x-l.x,t.y-l.y)},St.pointInPolygon=function({x:l,y:t},e){let i=e.length,o,r,n=!1;for(o=0,r=i-1;o<i;r=o++){let[s,a]=e[o],[h,p]=e[r];a>t!=p>t&&l<(h-s)*(t-a)/(p-a)+s&&(n=!n)}return n};var Po=xe;function Re(l,t,e=!0){let i=t[t.length-1],o,r,n,s=l;for(let a=0;a<t.length;a++){let h=s;o=t[a],s=[],r=e?h[h.length-1]:h[0];for(let p=0;p<h.length;p++)ce(i,o,n=h[p])?(ce(i,o,r)||s.push(Ue(i,o,r,n)),s.push(n)):ce(i,o,r)&&s.push(Ue(i,o,r,n)),r=n;i=o}return s}function ce(l,t,e){return(t[0]-l[0])*(e[1]-l[1])>(t[1]-l[1])*(e[0]-l[0])}function Ue(l,t,e,i){let o=[l[0]-t[0],l[1]-t[1]],r=[e[0]-i[0],e[1]-i[1]],n=l[0]*t[1]-l[1]*t[0],s=e[0]*i[1]-e[1]*i[0],a=1/(o[0]*r[1]-o[1]*r[0]),h=[(n*r[0]-s*o[0])*a,(n*r[1]-s*o[1])*a];return h.isIntersection=!0,h}var gt=Math.sign||(l=>l===0?0:l>0?1:-1),ft=Math.PI/180,at=Math.PI/2,Bt=l=>Math.tan((at+l)/2),To=class{constructor(l){let t=(l.parallels||[]).map(n=>n*ft),e=t[0]||0,i=t[1]??e,o=Math.cos(e);typeof l.projectedBounds=="object"&&(this.projectedBounds=l.projectedBounds);let r=e===i?Math.sin(e):Math.log(o/Math.cos(i))/Math.log(Bt(i)/Bt(e));1e-10>Math.abs(r)&&(r=1e-10*(gt(r)||1)),this.n=r,this.c=o*Math.pow(Bt(e),r)/r}forward(l){let{c:t,n:e,projectedBounds:i}=this,o=l[0]*ft,r=l[1]*ft;t>0?r<-at+1e-6&&(r=-at+1e-6):r>at-1e-6&&(r=at-1e-6);let n=t/Math.pow(Bt(r),e),s=n*Math.sin(e*o)*63.78137,a=(t-n*Math.cos(e*o))*63.78137,h=[s,a];return i&&(s<i.x1||s>i.x2||a<i.y1||a>i.y2)&&(h.outside=!0),h}inverse(l){let{c:t,n:e}=this,i=l[0]/63.78137,o=t-l[1]/63.78137,r=gt(e)*Math.sqrt(i*i+o*o),n=Math.atan2(i,Math.abs(o))*gt(o);return o*e<0&&(n-=Math.PI*gt(i)*gt(o)),[n/e/ft,(2*Math.atan(Math.pow(t/r,1/e))-at)/ft]}},Dt=Math.sqrt(3)/2,Lo=class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-97.52595454902263,y2:97.52595454902263}}forward(l){let t=Math.PI/180,e=Math.asin(Dt*Math.sin(l[1]*t)),i=e*e,o=i*i*i;return[l[0]*t*Math.cos(e)*74.03120656864502/(Dt*(1.340264+-.24331799999999998*i+o*(.0062510000000000005+.034164*i))),74.03120656864502*e*(1.340264+-.081106*i+o*(893e-6+.003796*i))]}inverse(l){let t=l[0]/74.03120656864502,e=l[1]/74.03120656864502,i=180/Math.PI,o=e,r,n,s,a;for(let d=0;d<12&&(n=(r=o*o)*r*r,s=o*(1.340264+-.081106*r+n*(893e-6+.003796*r))-e,o-=a=s/(1.340264+-.24331799999999998*r+n*(.0062510000000000005+.034164*r)),!(1e-9>Math.abs(a)));++d);n=(r=o*o)*r*r;let h=i*Dt*t*(1.340264+-.24331799999999998*r+n*(.0062510000000000005+.034164*r))/Math.cos(o),p=i*Math.asin(Math.sin(o)/Dt);return Math.abs(h)>180?[NaN,NaN]:[h,p]}},Ze=Math.PI/4,Ot=Math.PI/180,Ao=class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-146.91480769173063,y2:146.91480769173063}}forward(l){return[l[0]*Ot*63.78137,79.7267125*Math.log(Math.tan(Ze+.4*l[1]*Ot))]}inverse(l){return[l[0]/63.78137/Ot,2.5*(Math.atan(Math.exp(.8*(l[1]/63.78137)))-Ze)/Ot]}},Et=Math.PI/180,jo=class{constructor(){this.antimeridianCutting=!1,this.bounds={x1:-63.78460826781007,x2:63.78460826781007,y1:-63.78460826781007,y2:63.78460826781007}}forward(l){let t=l[0],e=l[1]*Et,i=[Math.cos(e)*Math.sin(t*Et)*63.78460826781007,63.78460826781007*Math.sin(e)];return(t<-90||t>90)&&(i.outside=!0),i}inverse(l){let t=l[0]/63.78460826781007,e=l[1]/63.78460826781007,i=Math.sqrt(t*t+e*e),o=Math.asin(i),r=Math.sin(o);return[Math.atan2(t*r,i*Math.cos(o))/Et,Math.asin(i&&e*r/i)/Et]}},Vt=Math.PI/180,zo=class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-200.3750834278071,y2:200.3750834278071},this.maxLatitude=85.0511287798}forward(l){let t=Math.sin(l[1]*Vt),e=[63.78137*l[0]*Vt,63.78137*Math.log((1+t)/(1-t))/2];return Math.abs(l[1])>this.maxLatitude&&(e.outside=!0),e}inverse(l){return[l[0]/(63.78137*Vt),(2*Math.atan(Math.exp(l[1]/63.78137))-Math.PI/2)/Vt]}},{clipLineString:ko,clipPolygon:So}={clipLineString:function(l,t){let e=[],i=Re(l,t,!1);for(let o=1;o<i.length;o++)i[o].isIntersection&&i[o-1].isIntersection&&(e.push(i.splice(0,o)),o=0),o===i.length-1&&e.push(i);return e},clipPolygon:Re},{clamp:Io,erase:Bo}=v(),A=2*Math.PI/360,rt=l=>(l<-180&&(l+=360),l>180&&(l-=360),l),He=l=>(1-Math.cos(l))/2,Do=(l,t)=>{let e=Math.cos,i=l[1]*A,o=l[0]*A,r=t[1]*A,n=t[0]*A;return He(r-i)+e(i)*e(r)*He(n-o)},Mt=(()=>{class l{static add(e,i){l.registry[e]=i}static distance(e,i){let{atan2:o,sqrt:r}=Math,n=Do(e,i);return 6371e3*(2*o(r(n),r(1-n)))}static geodesic(e,i,o,r=5e5){let{atan2:n,cos:s,sin:a,sqrt:h}=Math,p=l.distance,d=e[1]*A,c=e[0]*A,m=i[1]*A,b=i[0]*A,u=s(d)*s(c),f=s(m)*s(b),g=s(d)*a(c),y=s(m)*a(b),x=a(d),M=a(m),w=p(e,i),C=w/6371e3,T=a(C),D=Math.round(w/r),P=[];if(o&&P.push(e),D>1){let z=1/D;for(let j=z;j<.999;j+=z){let E=a((1-j)*C)/T,R=a(j*C)/T,dt=E*u+R*f,U=E*g+R*y,ct=n(E*x+R*M,h(dt*dt+U*U)),Qt=n(U,dt);P.push([Qt/A,ct/A])}}return o&&P.push(i),P}static insertGeodesics(e){let i=e.length-1;for(;i--;)if(Math.max(Math.abs(e[i][0]-e[i+1][0]),Math.abs(e[i][1]-e[i+1][1]))>10){let o=l.geodesic(e[i],e[i+1]);o.length&&e.splice(i+1,0,...o)}}static toString(e){let{name:i,rotation:o}=e||{};return[i,o&&o.join(",")].join(";")}constructor(e={}){this.hasCoordinates=!1,this.hasGeoProjection=!1,this.maxLatitude=90,this.options=e;let{name:i,projectedBounds:o,rotation:r}=e;this.rotator=r?this.getRotator(r):void 0;let n=i?l.registry[i]:void 0;n&&(this.def=new n(e));let{def:s,rotator:a}=this;s&&(this.maxLatitude=s.maxLatitude||90,this.hasGeoProjection=!0),a&&s?(this.forward=h=>s.forward(a.forward(h)),this.inverse=h=>a.inverse(s.inverse(h))):s?(this.forward=h=>s.forward(h),this.inverse=h=>s.inverse(h)):a&&(this.forward=a.forward,this.inverse=a.inverse),this.bounds=o==="world"?s&&s.bounds:o}lineIntersectsBounds(e){let{x1:i,x2:o,y1:r,y2:n}=this.bounds||{},s=(p,d,c)=>{let[m,b]=p,u=+!d;if(typeof c=="number"&&m[d]>=c!=b[d]>=c){let f=(c-m[d])/(b[d]-m[d]),g=m[u]+f*(b[u]-m[u]);return d?[g,c]:[c,g]}},a,h=e[0];return((a=s(e,0,i))||(a=s(e,0,o)))&&(h=a,e[1]=a),((a=s(e,1,r))||(a=s(e,1,n)))&&(h=a),h}getRotator(e){let i=e[0]*A,o=(e[1]||0)*A,r=(e[2]||0)*A,n=Math.cos(o),s=Math.sin(o),a=Math.cos(r),h=Math.sin(r);if(i!==0||o!==0||r!==0)return{forward:p=>{let d=p[0]*A+i,c=p[1]*A,m=Math.cos(c),b=Math.cos(d)*m,u=Math.sin(d)*m,f=Math.sin(c),g=f*n+b*s;return[Math.atan2(u*a-g*h,b*n-f*s)/A,Math.asin(g*a+u*h)/A]},inverse:p=>{let d=p[0]*A,c=p[1]*A,m=Math.cos(c),b=Math.cos(d)*m,u=Math.sin(d)*m,f=Math.sin(c),g=f*a-u*h;return[(Math.atan2(u*a+f*h,b*n+g*s)-i)/A,Math.asin(g*n-b*s)/A]}}}forward(e){return e}inverse(e){return e}cutOnAntimeridian(e,i){let o,r=[],n=[e];for(let s=0,a=e.length;s<a;++s){let h=e[s],p=e[s-1];if(!s){if(!i)continue;p=e[e.length-1]}let d=p[0],c=h[0];if((d<-90||d>90)&&(c<-90||c>90)&&d>0!=c>0){let m=Io((180-(d+360)%360)/((c+360)%360-(d+360)%360),0,1),b=p[1]+m*(h[1]-p[1]);r.push({i:s,lat:b,direction:d<0?1:-1,previousLonLat:p,lonLat:h})}}if(r.length)if(i){r.length%2==1&&(o=r.slice().sort((a,h)=>Math.abs(h.lat)-Math.abs(a.lat))[0],Bo(r,o));let s=r.length-2;for(;s>=0;){let a=r[s].i,h=rt(180+1e-6*r[s].direction),p=rt(180-1e-6*r[s].direction),d=e.splice(a,r[s+1].i-a,...l.geodesic([h,r[s].lat],[h,r[s+1].lat],!0));d.push(...l.geodesic([p,r[s+1].lat],[p,r[s].lat],!0)),n.push(d),s-=2}if(o)for(let a=0;a<n.length;a++){let{direction:h,lat:p}=o,d=n[a],c=d.indexOf(o.lonLat);if(c>-1){let m=(p<0?-1:1)*this.maxLatitude,b=rt(180+1e-6*h),u=rt(180-1e-6*h),f=l.geodesic([b,p],[b,m],!0);for(let g=b+120*h;g>-180&&g<180;g+=120*h)f.push([g,m]);f.push(...l.geodesic([u,m],[u,o.lat],!0)),d.splice(c,0,...f);break}}}else{let s=r.length;for(;s--;){let a=r[s].i,h=e.splice(a,e.length,[rt(180+1e-6*r[s].direction),r[s].lat]);h.unshift([rt(180-1e-6*r[s].direction),r[s].lat]),n.push(h)}}return n}path(e){let i,{bounds:o,def:r,rotator:n}=this,s=[],a=e.type==="Polygon"||e.type==="MultiPolygon",h=this.hasGeoProjection,p=!r||r.antimeridianCutting!==!1,d=p?n:void 0,c=p&&r||this;o&&(i=[[o.x1,o.y1],[o.x2,o.y1],[o.x2,o.y2],[o.x1,o.y2]]);let m=b=>{let u=b.map(g=>{if(p){d&&(g=d.forward(g));let y=g[0];1e-6>Math.abs(y-180)&&(y=y<180?179.999999:180.000001),g=[y,g[1]]}return g}),f=[u];h&&(l.insertGeodesics(u),p&&(f=this.cutOnAntimeridian(u,a))),f.forEach(g=>{let y,x;if(g.length<2)return;let M=!1,w=!1,C=z=>{M?s.push(["L",z[0],z[1]]):(s.push(["M",z[0],z[1]]),M=!0)},T=!1,D=!1,P=g.map(z=>{let j=c.forward(z);return j.outside?T=!0:D=!0,j[1]===1/0?j[1]=1e10:j[1]===-1/0&&(j[1]=-1e10),j});if(p){if(a&&P.push(P[0]),T){if(!D)return;if(i){if(a)P=So(P,i);else if(o)return void ko(P,i).forEach(z=>{M=!1,z.forEach(C)})}}P.forEach(C)}else for(let z=0;z<P.length;z++){let j=g[z],E=P[z];E.outside?w=!0:(a&&!y&&(y=j,g.push(j),P.push(E)),w&&x&&(a&&h?l.geodesic(x,j).forEach(R=>C(c.forward(R))):M=!1),C(E),x=j,w=!1)}})};return e.type==="LineString"?m(e.coordinates):e.type==="MultiLineString"?e.coordinates.forEach(b=>m(b)):e.type==="Polygon"?(e.coordinates.forEach(b=>m(b)),s.length&&s.push(["Z"])):e.type==="MultiPolygon"&&(e.coordinates.forEach(b=>{b.forEach(u=>m(u))}),s.length&&s.push(["Z"])),s}}return l.registry={EqualEarth:Lo,LambertConformalConic:To,Miller:Ao,Orthographic:jo,WebMercator:zo},l})(),{composed:Oo}=v(),{pointInPolygon:vt}=Po,{topo2geo:Ke}=Rt,{boundsFromPath:ui}=pi,{addEvent:q,clamp:Eo,crisp:qe,fireEvent:$e,isArray:Vo,isNumber:X,isObject:Xo,isString:No,merge:N,pick:Yo,pushUnique:Go,relativeLength:F}=v(),bt={};function Je(l,t){let{width:e,height:i}=t;return Math.log(400.979322/Math.max((l.x2-l.x1)/(e/256),(l.y2-l.y1)/(i/256)))/Math.log(2)}function Qe(l){l.seriesOptions.mapData&&this.mapView?.recommendMapView(this,[this.options.chart.map,l.seriesOptions.mapData],this.options.drilldown?.mapZooming)}var et=class l{static compose(t){Go(Oo,"MapView")&&(bt=t.maps,q(t,"afterInit",function(){this.mapView=new l(this,this.options.mapView)},{order:0}),q(t,"addSeriesAsDrilldown",Qe),q(t,"afterDrillUp",Qe))}static compositeBounds(t){if(t.length)return t.slice(1).reduce((e,i)=>(e.x1=Math.min(e.x1,i.x1),e.y1=Math.min(e.y1,i.y1),e.x2=Math.max(e.x2,i.x2),e.y2=Math.max(e.y2,i.y2),e),N(t[0]))}static mergeInsets(t,e){let i=r=>{let n={};return r.forEach((s,a)=>{n[s&&s.id||`i${a}`]=s}),n},o=N(i(t),i(e));return Object.keys(o).map(r=>o[r])}constructor(t,e){this.allowTransformAnimation=!0,this.eventsToUnbind=[],this.insets=[],this.padding=[0,0,0,0],this.recommendedMapView={},this instanceof Ht||this.recommendMapView(t,[t.options.chart.map,...(t.options.series||[]).map(n=>n.mapData)]),this.userOptions=e||{};let i=N(xo,this.recommendedMapView,e),o=this.recommendedMapView?.insets,r=e&&e.insets;o&&r&&(i.insets=l.mergeInsets(o,r)),this.chart=t,this.center=i.center,this.options=i,this.projection=new Mt(i.projection),this.playingField=t.plotBox,this.zoom=i.zoom||0,this.minZoom=i.minZoom,this.createInsets(),this.eventsToUnbind.push(q(t,"afterSetChartSize",()=>{this.playingField=this.getField(),(this.minZoom===void 0||this.minZoom===this.zoom)&&(this.fitToBounds(void 0,void 0,!1),!this.chart.hasRendered&&X(this.userOptions.zoom)&&(this.zoom=this.userOptions.zoom),this.userOptions.center&&N(!0,this.center,this.userOptions.center))})),this.setUpEvents()}createInsets(){let t=this.options,e=t.insets;e&&e.forEach(i=>{let o=new Ht(this,N(t.insetOptions,i));this.insets.push(o)})}fitToBounds(t,e,i=!0,o){let r=t||this.getProjectedBounds();if(r){let n=Yo(e,t?0:this.options.padding),s=this.getField(!1),a=Vo(n)?n:[n,n,n,n];this.padding=[F(a[0],s.height),F(a[1],s.width),F(a[2],s.height),F(a[3],s.width)],this.playingField=this.getField();let h=Je(r,this.playingField);t||(this.minZoom=h);let p=this.projection.inverse([(r.x2+r.x1)/2,(r.y2+r.y1)/2]);this.setView(p,h,i,o)}}getField(t=!0){let e=t?this.padding:[0,0,0,0];return{x:e[3],y:e[0],width:this.chart.plotWidth-e[1]-e[3],height:this.chart.plotHeight-e[0]-e[2]}}getGeoMap(t){if(No(t))return bt[t]&&bt[t].type==="Topology"?Ke(bt[t]):bt[t];if(Xo(t,!0)){if(t.type==="FeatureCollection")return t;if(t.type==="Topology")return Ke(t)}}getMapBBox(){let t=this.getProjectedBounds(),e=this.getScale();if(t){let i=this.padding,o=this.projectedUnitsToPixels({x:t.x1,y:t.y2});return{width:(t.x2-t.x1)*e+i[1]+i[3],height:(t.y2-t.y1)*e+i[0]+i[2],x:o.x-i[3],y:o.y-i[0]}}}getProjectedBounds(){let t=this.projection,e=this.chart.series.reduce((o,r)=>{let n=r.getProjectedBounds&&r.getProjectedBounds();return n&&r.options.affectsMapView!==!1&&o.push(n),o},[]),i=this.options.fitToGeometry;if(i){if(!this.fitToGeometryCache)if(i.type==="MultiPoint"){let o=i.coordinates.map(s=>t.forward(s)),r=o.map(s=>s[0]),n=o.map(s=>s[1]);this.fitToGeometryCache={x1:Math.min.apply(0,r),x2:Math.max.apply(0,r),y1:Math.min.apply(0,n),y2:Math.max.apply(0,n)}}else this.fitToGeometryCache=ui(t.path(i));return this.fitToGeometryCache}return this.projection.bounds||l.compositeBounds(e)}getScale(){return 256/400.979322*Math.pow(2,this.zoom)}getSVGTransform(){let{x:t,y:e,width:i,height:o}=this.playingField,r=this.projection.forward(this.center),n=this.projection.hasCoordinates?-1:1,s=this.getScale(),a=s*n,h=t+i/2-r[0]*s,p=e+o/2-r[1]*a;return{scaleX:s,scaleY:a,translateX:h,translateY:p}}lonLatToPixels(t){let e=this.lonLatToProjectedUnits(t);if(e)return this.projectedUnitsToPixels(e)}lonLatToProjectedUnits(t){let e=this.chart,i=e.mapTransforms;if(i){for(let r in i)if(Object.hasOwnProperty.call(i,r)&&i[r].hitZone){let n=e.transformFromLatLon(t,i[r]);if(n&&vt(n,i[r].hitZone.coordinates[0]))return n}return e.transformFromLatLon(t,i.default)}for(let r of this.insets)if(r.options.geoBounds&&vt({x:t.lon,y:t.lat},r.options.geoBounds.coordinates[0])){let n=r.projection.forward([t.lon,t.lat]),s=r.projectedUnitsToPixels({x:n[0],y:n[1]});return this.pixelsToProjectedUnits(s)}let o=this.projection.forward([t.lon,t.lat]);if(!o.outside)return{x:o[0],y:o[1]}}projectedUnitsToLonLat(t){let e=this.chart,i=e.mapTransforms;if(i){for(let n in i)if(Object.hasOwnProperty.call(i,n)&&i[n].hitZone&&vt(t,i[n].hitZone.coordinates[0]))return e.transformToLatLon(t,i[n]);return e.transformToLatLon(t,i.default)}let o=this.projectedUnitsToPixels(t);for(let n of this.insets)if(n.hitZone&&vt(o,n.hitZone.coordinates[0])){let s=n.pixelsToProjectedUnits(o),a=n.projection.inverse([s.x,s.y]);return{lon:a[0],lat:a[1]}}let r=this.projection.inverse([t.x,t.y]);return{lon:r[0],lat:r[1]}}recommendMapView(t,e,i=!1){this.recommendedMapView={};let o=e.map(s=>this.getGeoMap(s)),r=[];o.forEach(s=>{if(s&&(Object.keys(this.recommendedMapView).length||(this.recommendedMapView=s["hc-recommended-mapview"]||{}),s.bbox)){let[a,h,p,d]=s.bbox;r.push({x1:a,y1:h,x2:p,y2:d})}});let n=r.length&&l.compositeBounds(r);$e(this,"onRecommendMapView",{geoBounds:n,chart:t},function(){if(n&&this.recommendedMapView){if(!this.recommendedMapView.projection){let{x1:s,y1:a,x2:h,y2:p}=n;this.recommendedMapView.projection=h-s>180&&p-a>90?{name:"EqualEarth",parallels:[0,0],rotation:[0]}:{name:"LambertConformalConic",parallels:[a,p],rotation:[-(s+h)/2]}}this.recommendedMapView.insets||(this.recommendedMapView.insets=void 0)}}),this.geoMap=o[0],i&&t.hasRendered&&!t.userOptions.mapView?.projection&&this.recommendedMapView&&this.update(this.recommendedMapView)}redraw(t){this.chart.series.forEach(e=>{e.useMapGeometry&&(e.isDirty=!0)}),this.chart.redraw(t)}setView(t,e,i=!0,o){t&&(this.center=t),typeof e=="number"&&(typeof this.minZoom=="number"&&(e=Math.max(e,this.minZoom)),typeof this.options.maxZoom=="number"&&(e=Math.min(e,this.options.maxZoom)),X(e)&&(this.zoom=e));let r=this.getProjectedBounds();if(r){let n=this.projection.forward(this.center),{x:s,y:a,width:h,height:p}=this.playingField,d=this.getScale(),c=this.projectedUnitsToPixels({x:r.x1,y:r.y1}),m=this.projectedUnitsToPixels({x:r.x2,y:r.y2}),b=[(r.x1+r.x2)/2,(r.y1+r.y2)/2];if(!this.chart.series.some(u=>u.isDrilling)){let u=c.x,f=m.y,g=m.x,y=c.y;g-u<h?n[0]=b[0]:u<s&&g<s+h?n[0]+=Math.max(u-s,g-h-s)/d:g>s+h&&u>s&&(n[0]+=Math.min(g-h-s,u-s)/d),y-f<p?n[1]=b[1]:f<a&&y<a+p?n[1]-=Math.max(f-a,y-p-a)/d:y>a+p&&f>a&&(n[1]-=Math.min(y-p-a,f-a)/d),this.center=this.projection.inverse(n)}this.insets.forEach(u=>{u.options.field&&(u.hitZone=u.getHitZone(),u.playingField=u.getField())}),this.render()}$e(this,"afterSetView"),i&&this.redraw(o)}projectedUnitsToPixels(t){let e=this.getScale(),i=this.projection.forward(this.center),o=this.playingField,r=o.x+o.width/2,n=o.y+o.height/2;return{x:r-e*(i[0]-t.x),y:n+e*(i[1]-t.y)}}pixelsToLonLat(t){return this.projectedUnitsToLonLat(this.pixelsToProjectedUnits(t))}pixelsToProjectedUnits(t){let{x:e,y:i}=t,o=this.getScale(),r=this.projection.forward(this.center),n=this.playingField,s=n.x+n.width/2,a=n.y+n.height/2;return{x:r[0]+(e-s)/o,y:r[1]-(i-a)/o}}setUpEvents(){let t,e,i,{chart:o}=this,r=n=>{let{lastTouches:s,pinchDown:a}=o.pointer,h=this.projection,p=n.touches,{mouseDownX:d,mouseDownY:c}=o,m=0;if(a?.length===1?(d=a[0].chartX,c=a[0].chartY):a?.length===2&&(d=(a[0].chartX+a[1].chartX)/2,c=(a[0].chartY+a[1].chartY)/2),p?.length===2&&s&&(m=Math.log(Math.sqrt(Math.pow(s[0].chartX-s[1].chartX,2)+Math.pow(s[0].chartY-s[1].chartY,2))/Math.sqrt(Math.pow(p[0].chartX-p[1].chartX,2)+Math.pow(p[0].chartY-p[1].chartY,2)))/Math.log(.5)),X(d)&&X(c)){let b=`${d},${c}`,{chartX:u,chartY:f}=n.originalEvent;p?.length===2&&(u=(p[0].chartX+p[1].chartX)/2,f=(p[0].chartY+p[1].chartY)/2),b!==e&&(e=b,t=this.projection.forward(this.center),i=(this.projection.options.rotation||[0,0]).slice());let g=h.def&&h.def.bounds,y=g&&Je(g,this.playingField)||-1/0;if(h.options.name==="Orthographic"&&2>(p?.length||0)&&(this.minZoom||1/0)<1.3*y){let x=440/(this.getScale()*Math.min(o.plotWidth,o.plotHeight));if(i){let M=(d-u)*x-i[0],w=Eo(-i[1]-(c-f)*x,-80,80),C=this.zoom;this.update({projection:{rotation:[-M,-w]}},!1),this.fitToBounds(void 0,void 0,!1),this.zoom=C,o.redraw(!1)}}else if(X(u)&&X(f)){let x=this.getScale(),M=this.projection.hasCoordinates?1:-1,w=this.projection.inverse([t[0]+(d-u)/x,t[1]-(c-f)/x*M]);isNaN(w[0]+w[1])||this.zoomBy(m,w,void 0,!1)}n.preventDefault()}};q(o,"pan",r),q(o,"touchpan",r),q(o,"selection",n=>{if(n.resetSelection)this.zoomBy();else{let s=n.x-o.plotLeft,a=n.y-o.plotTop,{y:h,x:p}=this.pixelsToProjectedUnits({x:s,y:a}),{y:d,x:c}=this.pixelsToProjectedUnits({x:s+n.width,y:a+n.height});this.fitToBounds({x1:p,y1:h,x2:c,y2:d},void 0,!0,!n.originalEvent.touches&&void 0),/^touch/.test(n.originalEvent.type)||o.showResetZoom(),n.preventDefault()}})}render(){this.group||(this.group=this.chart.renderer.g("map-view").attr({zIndex:4}).add())}update(t,e=!0,i){let o=t.projection,r=o&&Mt.toString(o)!==Mt.toString(this.options.projection),n=!1;N(!0,this.userOptions,t),N(!0,this.options,t),"insets"in t&&(this.insets.forEach(s=>s.destroy()),this.insets.length=0,n=!0),(r||"fitToGeometry"in t)&&delete this.fitToGeometryCache,(r||n)&&(this.chart.series.forEach(s=>{let a=s.transformGroups;if(s.clearBounds&&s.clearBounds(),s.isDirty=!0,s.isDirtyData=!0,n&&a)for(;a.length>1;){let h=a.pop();h&&h.destroy()}}),r&&(this.projection=new Mt(this.options.projection)),n&&this.createInsets(),!t.center&&Object.hasOwnProperty.call(t,"zoom")&&!X(t.zoom)&&this.fitToBounds(void 0,void 0,!1)),t.center||X(t.zoom)?this.setView(this.options.center,t.zoom,!1):"fitToGeometry"in t&&this.fitToBounds(void 0,void 0,!1),e&&this.chart.redraw(i)}zoomBy(t,e,i,o){let r=this.chart,n=this.projection.forward(this.center);if(typeof t=="number"){let s,a,h,p=this.zoom+t;if(i){let[d,c]=i,m=this.getScale(),b=d-r.plotLeft-r.plotWidth/2,u=c-r.plotTop-r.plotHeight/2;a=n[0]+b/m,h=n[1]+u/m}if(typeof a=="number"&&typeof h=="number"){let d=1-Math.pow(2,this.zoom)/Math.pow(2,p),c=n[0]-a,m=n[1]-h;n[0]-=c*d,n[1]+=m*d,s=this.projection.inverse(n)}this.setView(e||s,p,void 0,o)}else this.fitToBounds(void 0,void 0,void 0,o)}},Ht=class extends et{constructor(t,e){if(super(t.chart,e),this.id=e.id,this.mapView=t,this.options=N({center:[0,0]},t.options.insetOptions,e),this.allBounds=[],this.options.geoBounds){let i=t.projection.path(this.options.geoBounds);this.geoBoundsProjectedBox=ui(i),this.geoBoundsProjectedPolygon=i.map(o=>[o[1]||0,o[2]||0])}}getField(t=!0){let e=this.hitZone;if(e){let i=t?this.padding:[0,0,0,0],o=e.coordinates[0],r=o.map(d=>d[0]),n=o.map(d=>d[1]),s=Math.min.apply(0,r)+i[3],a=Math.max.apply(0,r)-i[1],h=Math.min.apply(0,n)+i[0],p=Math.max.apply(0,n)-i[2];if(X(s)&&X(h))return{x:s,y:h,width:a-s,height:p-h}}return super.getField.call(this,t)}getHitZone(){let{chart:t,mapView:e,options:i}=this,{coordinates:o}=i.field||{};if(o){let r=o[0];if(i.units==="percent"){let n=i.relativeTo==="mapBoundingBox"&&e.getMapBBox()||N(t.plotBox,{x:0,y:0});r=r.map(s=>[F(`${s[0]}%`,n.width,n.x),F(`${s[1]}%`,n.height,n.y)])}return{type:"Polygon",coordinates:[r]}}}getProjectedBounds(){return et.compositeBounds(this.allBounds)}isInside(t){let{geoBoundsProjectedBox:e,geoBoundsProjectedPolygon:i}=this;return!!(e&&t.x>=e.x1&&t.x<=e.x2&&t.y>=e.y1&&t.y<=e.y2&&i&&vt(t,i))}render(){let{chart:t,mapView:e,options:i}=this,o=i.borderPath||i.field;if(o&&e.group){let r=!0;this.border||(this.border=t.renderer.path().addClass("highcharts-mapview-inset-border").add(e.group),r=!1),t.styledMode||this.border.attr({stroke:i.borderColor,"stroke-width":i.borderWidth});let n=this.border.strokeWidth(),s=i.relativeTo==="mapBoundingBox"&&e.getMapBBox()||e.playingField,a=(o.coordinates||[]).reduce((h,p)=>p.reduce((d,c,m)=>{let[b,u]=c;return i.units==="percent"&&(b=t.plotLeft+F(`${b}%`,s.width,s.x),u=t.plotTop+F(`${u}%`,s.height,s.y)),b=qe(b,n),u=qe(u,n),d.push(m===0?["M",b,u]:["L",b,u]),d},h),[]);this.border[r?"animate":"attr"]({d:a})}}destroy(){this.border&&(this.border=this.border.destroy()),this.eventsToUnbind.forEach(t=>t())}setUpEvents(){}},{animObject:_e,stop:Wo}=v(),{noop:Xt}=v(),{splitPath:Fo}=Ft,{column:ti,scatter:mi}=I().seriesTypes,{extend:Ro,find:Uo,fireEvent:ei,getNestedProperty:ii,isArray:ue,defined:oi,isNumber:O,isObject:Zo,merge:wt,objectEach:Ho,pick:me,splat:Ko}=v(),tt=class extends mi{constructor(){super(...arguments),this.processedData=[]}animate(t){let{chart:e,group:i}=this,o=_e(this.options.animation);t?i.attr({translateX:e.plotLeft+e.plotWidth/2,translateY:e.plotTop+e.plotHeight/2,scaleX:.001,scaleY:.001}):i.animate({translateX:e.plotLeft,translateY:e.plotTop,scaleX:1,scaleY:1},o)}clearBounds(){this.points.forEach(t=>{delete t.bounds,delete t.insetIndex,delete t.projectedPath}),delete this.bounds}doFullTranslate(){return!!(this.isDirtyData||this.chart.isResizing||!this.hasRendered)}drawMapDataLabels(){super.drawDataLabels(),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)}drawPoints(){let t=this,{chart:e,group:i,transformGroups:o=[]}=this,{mapView:r,renderer:n}=e;if(r){this.transformGroups=o,o[0]||(o[0]=n.g().add(i));for(let s=0,a=r.insets.length;s<a;++s)o[s+1]||o.push(n.g().add(i));this.doFullTranslate()&&(this.points.forEach(s=>{let{graphic:a}=s;s.group=o[typeof s.insetIndex=="number"?s.insetIndex+1:0],a&&a.parentGroup!==s.group&&a.add(s.group)}),ti.prototype.drawPoints.apply(this),this.points.forEach(s=>{let a=s.graphic;if(a){let h=a.animate,p="";s.name&&(p+="highcharts-name-"+s.name.replace(/ /g,"-").toLowerCase()),s.properties?.["hc-key"]&&(p+=" highcharts-key-"+s.properties["hc-key"].toString().toLowerCase()),p&&a.addClass(p),e.styledMode&&a.css(this.pointAttribs(s,s.selected&&"select"||void 0)),a.attr({visibility:!s.visible&&(s.visible||s.isNull)?"hidden":"inherit"}),a.animate=function(d,c,m){let b=O(d["stroke-width"])&&!O(a["stroke-width"]),u=O(a["stroke-width"])&&!O(d["stroke-width"]);if(b||u){let f=me(t.getStrokeWidth(t.options),1)/(e.mapView?.getScale()||1);b&&(a["stroke-width"]=f),u&&(d["stroke-width"]=f)}return h.call(a,d,c,u?function(){a.element.removeAttribute("stroke-width"),delete a["stroke-width"],m&&m.apply(this,arguments)}:m)}}})),o.forEach((s,a)=>{let h=(a===0?r:r.insets[a-1]).getSVGTransform(),p=me(this.getStrokeWidth(this.options),1),d=h.scaleX,c=h.scaleY>0?1:-1,m=b=>{(t.points||[]).forEach(u=>{let f,g=u.graphic;g?.["stroke-width"]&&(f=this.getStrokeWidth(u.options))&&g.attr({"stroke-width":f/b})})};if(n.globalAnimation&&e.hasRendered&&r.allowTransformAnimation){let b=Number(s.attr("translateX")),u=Number(s.attr("translateY")),f=Number(s.attr("scaleX")),g=(M,w)=>{let C=f+(d-f)*w.pos;s.attr({translateX:b+(h.translateX-b)*w.pos,translateY:u+(h.translateY-u)*w.pos,scaleX:C,scaleY:C*c,"stroke-width":p/C}),m(C)},y=wt(_e(n.globalAnimation)),x=y.step;y.step=function(){x&&x.apply(this,arguments),g.apply(this,arguments)},s.attr({animator:0}).animate({animator:1},y,function(){typeof n.globalAnimation!="boolean"&&n.globalAnimation.complete&&n.globalAnimation.complete({applyDrilldown:!0}),ei(this,"mapZoomComplete")}.bind(this))}else Wo(s),s.attr(wt(h,{"stroke-width":p/d})),m(d)}),this.isDrilling||this.drawMapDataLabels()}}getProjectedBounds(){if(!this.bounds&&this.chart.mapView){let{insets:t,projection:e}=this.chart.mapView,i=[];(this.points||[]).forEach(o=>{if(o.path||o.geometry){if(typeof o.path=="string"?o.path=Fo(o.path):ue(o.path)&&o.path[0]==="M"&&(o.path=this.chart.renderer.pathToSegments(o.path)),!o.bounds){let r=o.getProjectedBounds(e);if(r){o.labelrank=me(o.labelrank,(r.x2-r.x1)*(r.y2-r.y1));let{midX:n,midY:s}=r;if(t&&O(n)&&O(s)){let a=Uo(t,h=>h.isInside({x:n,y:s}));a&&(delete o.projectedPath,(r=o.getProjectedBounds(a.projection))&&a.allBounds.push(r),o.insetIndex=t.indexOf(a))}o.bounds=r}}o.bounds&&o.insetIndex===void 0&&i.push(o.bounds)}}),this.bounds=et.compositeBounds(i)}return this.bounds}getStrokeWidth(t){let e=this.pointAttrToOptions;return t[e?.["stroke-width"]||"borderWidth"]}hasData(){return!!this.dataTable.rowCount}pointAttribs(t,e){let{mapView:i,styledMode:o}=t.series.chart,r=o?this.colorAttribs(t):ti.prototype.pointAttribs.call(this,t,e),n=this.getStrokeWidth(t.options);if(e){let a=wt(this.options.states&&this.options.states[e],t.options.states&&t.options.states[e]||{}),h=this.getStrokeWidth(a);oi(h)&&(n=h),r.stroke=a.borderColor??t.color}n&&i&&(n/=i.getScale());let s=this.getStrokeWidth(this.options);return r.dashstyle&&i&&O(s)&&(n=s/i.getScale()),t.visible||(r.fill=this.options.nullColor),oi(n)?r["stroke-width"]=n:delete r["stroke-width"],r["stroke-linecap"]=r["stroke-linejoin"]=this.options.linecap,r}updateData(){return!this.processedData&&super.updateData.apply(this,arguments)}setData(t,e=!0,i,o){delete this.bounds,super.setData(t,!1,void 0,o),this.processData(),this.generatePoints(),e&&this.chart.redraw(i)}dataColumnKeys(){return this.pointArrayMap}processData(){let t,e,i,o=this.options,r=o.data,n=this.chart,s=n.options.chart,a=this.joinBy,h=o.keys||this.pointArrayMap,p=[],d={},c=this.chart.mapView,m=c&&(Zo(o.mapData,!0)?c.getGeoMap(o.mapData):c.geoMap),b=n.mapTransforms=s.mapTransforms||m?.["hc-transform"]||n.mapTransforms;b&&Ho(b,f=>{f.rotation&&(f.cosAngle=Math.cos(f.rotation),f.sinAngle=Math.sin(f.rotation))}),ue(o.mapData)?i=o.mapData:m&&m.type==="FeatureCollection"&&(this.mapTitle=m.title,i=v().geojson(m,this.type,this)),this.processedData=[];let u=this.processedData;if(r){let f;for(let g=0,y=r.length;g<y;++g){if(O(f=r[g]))u[g]={value:f};else if(ue(f)){let x=0;u[g]={},!o.keys&&f.length>h.length&&typeof f[0]=="string"&&(u[g]["hc-key"]=f[0],++x);for(let M=0;M<h.length;++M,++x)h[M]&&f[x]!==void 0&&(h[M].indexOf(".")>0?pt.prototype.setNestedProperty(u[g],f[x],h[M]):u[g][h[M]]=f[x])}else u[g]=r[g];a&&a[0]==="_i"&&(u[g]._i=g)}}if(i){this.mapData=i,this.mapMap={};for(let f=0;f<i.length;f++)e=(t=i[f]).properties,t._i=f,a[0]&&e&&e[a[0]]&&(t[a[0]]=e[a[0]]),d[t[a[0]]]=t;if(this.mapMap=d,a[1]){let f=a[1];u.forEach(g=>{let y=ii(f,g);d[y]&&p.push(d[y])})}if(o.allAreas){if(a[1]){let g=a[1];u.forEach(y=>{p.push(ii(g,y))})}let f="|"+p.map(function(g){return g&&g[a[0]]}).join("|")+"|";i.forEach(g=>{a[0]&&f.indexOf("|"+g[a[0]]+"|")!==-1||u.push(wt(g,{value:null}))})}}this.dataTable.rowCount=u.length}setOptions(t){let e=super.setOptions(t),i=e.joinBy;return e.joinBy===null&&(i="_i"),i&&(this.joinBy=Ko(i),this.joinBy[1]||(this.joinBy[1]=this.joinBy[0])),e}translate(){let t=this.doFullTranslate(),e=this.chart.mapView,i=e?.projection;if(this.chart.hasRendered&&(this.isDirtyData||!this.hasRendered)&&(this.processData(),this.generatePoints(),delete this.bounds,!e||e.userOptions.center||O(e.userOptions.zoom)||e.zoom!==e.minZoom?this.getProjectedBounds():e.fitToBounds(void 0,void 0,!1)),e){let o=e.getSVGTransform();this.points.forEach(r=>{let n=O(r.insetIndex)&&e.insets[r.insetIndex].getSVGTransform()||o;n&&r.bounds&&O(r.bounds.midX)&&O(r.bounds.midY)&&(r.plotX=r.bounds.midX*n.scaleX+n.translateX,r.plotY=r.bounds.midY*n.scaleY+n.translateY),t&&(r.shapeType="path",r.shapeArgs={d:pt.getProjectedPath(r,i)}),!r.hiddenInDataClass&&(r.projectedPath&&!r.projectedPath.length?r.setVisible(!1):r.visible||r.setVisible(!0))})}ei(this,"afterTranslate")}update(t){t.mapData&&this.chart.mapView?.recommendMapView(this.chart,[this.chart.options.chart.map,...(this.chart.options.series||[]).map((e,i)=>i===this._i?t.mapData:e.mapData)],!0),super.update.apply(this,arguments)}};tt.defaultOptions=wt(mi.defaultOptions,{affectsMapView:!0,animation:!1,dataLabels:{crop:!1,formatter:function(){let{numberFormatter:l}=this.series.chart,{value:t}=this.point;return yo(t)?l(t,-1):this.point.name||""},inside:!0,overflow:!1,padding:0,verticalAlign:"middle"},linecap:"round",marker:null,nullColor:"#f7f7f7",stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:"{point.name}: {point.value}<br/>"},turboThreshold:0,allAreas:!0,borderColor:"#e6e6e6",borderWidth:1,joinBy:"hc-key",states:{hover:{halo:void 0,borderColor:"#666666",borderWidth:2},normal:{animation:!0},select:{color:"#cccccc"}},legendSymbol:"rectangle"}),Ro(tt.prototype,{type:"map",axisTypes:k.seriesMembers.axisTypes,colorAttribs:k.seriesMembers.colorAttribs,colorKey:k.seriesMembers.colorKey,directTouch:!0,drawDataLabels:Xt,drawGraph:Xt,forceDL:!0,getCenter:ho.getCenter,getExtremesFromAll:!0,getSymbol:Xt,isCartesian:!1,parallelArrays:k.seriesMembers.parallelArrays,pointArrayMap:k.seriesMembers.pointArrayMap,pointClass:pt,preserveAspectRatio:!0,searchPoint:Xt,trackerGroups:k.seriesMembers.trackerGroups,useMapGeometry:!0}),k.compose(tt),I().registerSeriesType("map",tt);var gi=tt,{extend:qo,merge:$o}=v(),Ct=class extends gi{pointAttribs(t,e){let i=super.pointAttribs(t,e);return i.fill=this.options.fillColor,i}};Ct.defaultOptions=$o(gi.defaultOptions,{lineWidth:1,fillColor:"none",legendSymbol:"lineMarker"}),qo(Ct.prototype,{type:"mapline",colorProp:"stroke",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"}}),I().registerSeriesType("mapline",Ct);var{scatter:Jo}=I().seriesTypes,{isNumber:Nt}=v(),Me=class extends Jo.prototype.pointClass{isValid(){return!!(this.options.geometry||Nt(this.x)&&Nt(this.y)||Nt(this.options.lon)&&Nt(this.options.lat))}};S.d({},{});var{noop:Qo}=v(),{map:_o,scatter:fi}=I().seriesTypes,{extend:ts,fireEvent:es,isNumber:$,merge:is}=v(),Pt=class extends fi{constructor(){super(...arguments),this.clearBounds=_o.prototype.clearBounds}drawDataLabels(){super.drawDataLabels(),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)}projectPoint(t){let e=this.chart.mapView;if(e){let{geometry:i,lon:o,lat:r}=t,n=i&&i.type==="Point"&&i.coordinates;if($(o)&&$(r)&&(n=[o,r]),n)return e.lonLatToProjectedUnits({lon:n[0],lat:n[1]})}}translate(){let t=this.chart.mapView;if(this.generatePoints(),this.getProjectedBounds&&this.isDirtyData&&(delete this.bounds,this.getProjectedBounds()),t){let e=t.getSVGTransform(),{hasCoordinates:i}=t.projection;this.points.forEach(o=>{let r,{x:n,y:s}=o,a=$(o.insetIndex)&&t.insets[o.insetIndex].getSVGTransform()||e,h=this.projectPoint(o.options)||o.properties&&this.projectPoint(o.properties);if(h?(n=h.x,s=h.y):o.bounds&&(n=o.bounds.midX,s=o.bounds.midY,a&&$(n)&&$(s)&&(o.plotX=n*a.scaleX+a.translateX,o.plotY=s*a.scaleY+a.translateY,r=!0)),$(n)&&$(s)){if(!r){let p=t.projectedUnitsToPixels({x:n,y:s});o.plotX=p.x,o.plotY=i?p.y:this.chart.plotHeight-p.y}}else o.y=o.plotX=o.plotY=void 0;o.isInside=this.isPointInside(o),o.zone=this.zones.length?o.getZone():void 0})}es(this,"afterTranslate")}};Pt.defaultOptions=is(fi.defaultOptions,{dataLabels:{crop:!1,defer:!1,enabled:!0,formatter:function(){return this.point.name},overflow:!1,style:{color:"#000000"}},legendSymbol:"lineMarker"}),Pe().prototype.symbols.mapmarker=(l,t,e,i,o)=>{let r,n,s=o&&o.context==="legend";s?(r=l+e/2,n=t+i):o&&typeof o.anchorX=="number"&&typeof o.anchorY=="number"?(r=o.anchorX,n=o.anchorY):(r=l+e/2,n=t+i/2,t-=i);let a=s?i/3:i/2;return[["M",r,n],["C",r,n,r-a,t+1.5*a,r-a,t+a],["A",a,a,1,1,1,r+a,t+a],["C",r+a,t+1.5*a,r,n,r,n],["Z"]]},ts(Pt.prototype,{type:"mappoint",axisTypes:["colorAxis"],forceDL:!0,isCartesian:!1,pointClass:Me,searchPoint:Qo,useMapGeometry:!0}),I().registerSeriesType("mappoint",Pt);var os={borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"0.9em",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0},{noop:ss}=v(),{arrayMax:rs,arrayMin:as,isNumber:si,merge:yt,pick:xt,stableSort:ns}=v(),ls=class{constructor(l,t){this.setState=ss,this.init(l,t)}init(l,t){this.options=l,this.visible=!0,this.chart=t.chart,this.legend=t}addToLegend(l){l.splice(this.options.legendIndex,0,this)}drawLegendSymbol(l){let t,e=xt(l.options.itemDistance,20),i=this.legendItem||{},o=this.options,r=o.ranges,n=o.connectorDistance;if(!r||!r.length||!si(r[0].value)){l.options.bubbleLegend.autoRanges=!0;return}ns(r,function(p,d){return d.value-p.value}),this.ranges=r,this.setOptions(),this.render();let s=this.getMaxLabelSize(),a=this.ranges[0].radius,h=2*a;t=(t=n-a+s.width)>0?t:0,this.maxLabel=s,this.movementX=o.labels.align==="left"?t:0,i.labelWidth=h+t+e,i.labelHeight=h+s.height/2}setOptions(){let l=this.ranges,t=this.options,e=this.chart.series[t.seriesIndex],i=this.legend.baseline,o={zIndex:t.zIndex,"stroke-width":t.borderWidth},r={zIndex:t.zIndex,"stroke-width":t.connectorWidth},n={align:this.legend.options.rtl||t.labels.align==="left"?"right":"left",zIndex:t.zIndex},s=e.options.marker.fillOpacity,a=this.chart.styledMode;l.forEach(function(h,p){a||(o.stroke=xt(h.borderColor,t.borderColor,e.color),o.fill=h.color||t.color,o.fill||(o.fill=e.color,o["fill-opacity"]=s??1),r.stroke=xt(h.connectorColor,t.connectorColor,e.color)),l[p].radius=this.getRangeRadius(h.value),l[p]=yt(l[p],{center:l[0].radius-l[p].radius+i}),a||yt(!0,l[p],{bubbleAttribs:yt(o),connectorAttribs:yt(r),labelAttribs:n})},this)}getRangeRadius(l){let t=this.options,e=this.options.seriesIndex,i=this.chart.series[e],o=t.ranges[0].value,r=t.ranges[t.ranges.length-1].value,n=t.minSize,s=t.maxSize;return i.getRadius.call(this,r,o,n,s,l)}render(){let l=this.legendItem||{},t=this.chart.renderer,e=this.options.zThreshold;for(let i of(this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),l.symbol=t.g("bubble-legend"),l.label=t.g("bubble-legend-item").css(this.legend.itemStyle||{}),l.symbol.translateX=0,l.symbol.translateY=0,l.symbol.add(l.label),l.label.add(l.group),this.ranges))i.value>=e&&this.renderRange(i);this.hideOverlappingLabels()}renderRange(l){let t=this.ranges[0],e=this.legend,i=this.options,o=i.labels,r=this.chart,n=r.series[i.seriesIndex],s=r.renderer,a=this.symbols,h=a.labels,p=l.center,d=Math.abs(l.radius),c=i.connectorDistance||0,m=o.align,b=e.options.rtl,u=i.borderWidth,f=i.connectorWidth,g=t.radius||0,y=p-d-u/2+f/2,x=(y%1?1:.5)-(f%2?0:.5),M=s.styledMode,w=b||m==="left"?-c:c;m==="center"&&(w=0,i.connectorDistance=0,l.labelAttribs.align="center"),a.bubbleItems.push(s.circle(g,p+x,d).attr(M?{}:l.bubbleAttribs).addClass((M?"highcharts-color-"+n.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(i.className||"")).add(this.legendItem.symbol)),a.connectors.push(s.path(s.crispLine([["M",g,y],["L",g+w,y]],i.connectorWidth)).attr(M?{}:l.connectorAttribs).addClass((M?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(i.connectorClassName||"")).add(this.legendItem.symbol));let C=s.text(this.formatLabel(l)).attr(M?{}:l.labelAttribs).css(M?{}:o.style).addClass("highcharts-bubble-legend-labels "+(i.labels.className||"")).add(this.legendItem.symbol),T={x:g+w+i.labels.x,y:y+i.labels.y+.4*C.getBBox().height};C.attr(T),h.push(C),C.placed=!0,C.alignAttr=T}getMaxLabelSize(){let l,t;return this.symbols.labels.forEach(function(e){t=e.getBBox(!0),l=l?t.width>l.width?t:l:t}),l||{}}formatLabel(l){let t=this.options,e=t.labels.formatter,i=t.labels.format,{numberFormatter:o}=this.chart;return i?ci().format(i,l,this.chart):e?e.call(l):o(l.value,1)}hideOverlappingLabels(){let l=this.chart,t=this.options.labels.allowOverlap,e=this.symbols;!t&&e&&(l.hideOverlappingLabels(e.labels),e.labels.forEach(function(i,o){i.newOpacity?i.newOpacity!==i.oldOpacity&&e.connectors[o].show():e.connectors[o].hide()}))}getRanges(){let l=this.legend.bubbleLegend,t=l.chart.series,e=l.options.ranges,i,o,r=Number.MAX_VALUE,n=-Number.MAX_VALUE;return t.forEach(function(s){s.isBubble&&!s.ignoreSeries&&(o=s.getColumn("z").filter(si)).length&&(r=xt(s.options.zMin,Math.min(r,Math.max(as(o),s.options.displayNegative===!1?s.options.zThreshold:-Number.MAX_VALUE))),n=xt(s.options.zMax,Math.max(n,rs(o))))}),i=r===n?[{value:n}]:[{value:r},{value:(r+n)/2},{value:n,autoRanges:!0}],e.length&&e[0].radius&&i.reverse(),i.forEach(function(s,a){e&&e[a]&&(i[a]=yt(e[a],s))}),i}predictBubbleSizes(){let l=this.chart,t=l.legend.options,e=t.floating,i=t.layout==="horizontal",o=i?l.legend.lastLineHeight:0,r=l.plotSizeX,n=l.plotSizeY,s=l.series[this.options.seriesIndex],a=s.getPxExtremes(),h=Math.ceil(a.minPxSize),p=Math.ceil(a.maxPxSize),d=Math.min(n,r),c,m=s.options.maxSize;return e||!/%$/.test(m)?c=p:(c=(d+o)*(m=parseFloat(m))/100/(m/100+1),(i&&n-c>=r||!i&&r-c>=n)&&(c=p)),[h,Math.ceil(c)]}updateRanges(l,t){let e=this.legend.options.bubbleLegend;e.minSize=l,e.maxSize=t,e.ranges=this.getRanges()}correctSizes(){let l=this.legend,t=this.chart.series[this.options.seriesIndex].getPxExtremes();Math.abs(Math.ceil(t.maxPxSize)-this.options.maxSize)>1&&(this.updateRanges(this.options.minSize,t.maxPxSize),l.render())}},{setOptions:hs}=v(),{composed:ps}=v(),{addEvent:ri,objectEach:ds,pushUnique:cs,wrap:us}=v();function ms(l,t,e){let i,o,r,n=this.legend,s=Te(this)>=0;n&&n.options.enabled&&n.bubbleLegend&&n.options.bubbleLegend.autoRanges&&s?(i=n.bubbleLegend.options,o=n.bubbleLegend.predictBubbleSizes(),n.bubbleLegend.updateRanges(o[0],o[1]),i.placed||(n.group.placed=!1,n.allItems.forEach(a=>{(r=a.legendItem||{}).group&&(r.group.translateY=void 0)})),n.render(),i.placed||(this.getMargins(),this.axes.forEach(a=>{a.setScale(),a.updateNames(),ds(a.ticks,function(h){h.isNew=!0,h.isNewLabel=!0})}),this.getMargins()),i.placed=!0,l.call(this,t,e),n.bubbleLegend.correctSizes(),ni(n,ai(n))):(l.call(this,t,e),n&&n.options.enabled&&n.bubbleLegend&&(n.render(),ni(n,ai(n))))}function Te(l){let t=l.series,e=0;for(;e<t.length;){if(t[e]&&t[e].isBubble&&t[e].visible&&t[e].dataTable.rowCount)return e;e++}return-1}function ai(l){let t=l.allItems,e=[],i=t.length,o,r,n,s=0,a=0;for(s=0;s<i;s++)if(r=t[s].legendItem||{},n=(t[s+1]||{}).legendItem||{},r.labelHeight&&(t[s].itemHeight=r.labelHeight),t[s]===t[i-1]||r.y!==n.y){for(e.push({height:0}),o=e[e.length-1];a<=s;a++)t[a].itemHeight>o.height&&(o.height=t[a].itemHeight);o.step=s}return e}function gs(l){let t=this.bubbleLegend,e=this.options,i=e.bubbleLegend,o=Te(this.chart);t&&t.ranges&&t.ranges.length&&(i.ranges.length&&(i.autoRanges=!!i.ranges[0].autoRanges),this.destroyItem(t)),o>=0&&e.enabled&&i.enabled&&(i.seriesIndex=o,this.bubbleLegend=new ls(i,this),this.bubbleLegend.addToLegend(l.allItems))}function fs(l){let t;if(l.defaultPrevented)return!1;let e=l.legendItem,i=this.chart,o=e.visible;this&&this.bubbleLegend&&(e.visible=!o,e.ignoreSeries=o,t=Te(i)>=0,this.bubbleLegend.visible!==t&&(this.update({bubbleLegend:{enabled:t}}),this.bubbleLegend.visible=t),e.visible=o)}function ni(l,t){let e=l.allItems,i=l.options.rtl,o,r,n,s,a=0;e.forEach((h,p)=>{(s=h.legendItem||{}).group&&(o=s.group.translateX||0,r=s.y||0,((n=h.movementX)||i&&h.ranges)&&(n=i?o-h.options.maxSize/2:o+n,s.group.attr({translateX:n})),p>t[a].step&&a++,s.group.attr({translateY:Math.round(r+t[a].height/2)}),s.y=r+t[a].height/2)})}var bs=function(l,t){cs(ps,"Series.BubbleLegend")&&(hs({legend:{bubbleLegend:os}}),us(l.prototype,"drawChartBox",ms),ri(t,"afterGetAllItems",gs),ri(t,"itemClick",fs))},ys=B.Point,xs=S.n(ys),{seriesTypes:{scatter:{prototype:{pointClass:Ms}}}}=I(),{extend:vs}=v(),Kt=class extends Ms{haloPath(t){let e=(t&&this.marker&&this.marker.radius||0)+t;if(this.series.chart.inverted){let i=this.pos()||[0,0],{xAxis:o,yAxis:r,chart:n}=this.series,s=2*e;return n.renderer.symbols.circle((o?.len||0)-i[1]-e,(r?.len||0)-i[0]-e,s,s)}return xs().prototype.haloPath.call(this,e)}};vs(Kt.prototype,{ttBelow:!1});var bi=Kt,{composed:ws,noop:ve}=v(),{series:Cs,seriesTypes:{column:{prototype:Ps},scatter:yi}}=I(),{addEvent:qt,arrayMax:Ts,arrayMin:Ls,clamp:As,extend:we,isNumber:Q,merge:js,pick:J,pushUnique:zs}=v();function ks(){let l=this.len,{coll:t,isXAxis:e,min:i}=this,o=(this.max||0)-(i||0),r=0,n=l,s=l/o,a;(t==="xAxis"||t==="yAxis")&&(this.series.forEach(h=>{if(h.bubblePadding&&h.reserveSpace()){this.allowZoomOutside=!0,a=!0;let p=h.getColumn(e?"x":"y");if(e&&((h.onPoint||h).getRadii(0,0,h),h.onPoint&&(h.radii=h.onPoint.radii)),o>0){let d=p.length;for(;d--;)if(Q(p[d])&&this.dataMin<=p[d]&&p[d]<=this.max){let c=h.radii&&h.radii[d]||0;r=Math.min((p[d]-i)*s-c,r),n=Math.max((p[d]-i)*s+c,n)}}}}),a&&o>0&&!this.logarithmic&&(n-=l,s*=(l+Math.max(0,r)-Math.min(n,l))/l,[["min","userMin",r],["max","userMax",n]].forEach(h=>{J(this.options[h[0]],this[h[1]])===void 0&&(this[h[0]]+=h[2]/s)})))}function Ss(){let{ticks:l,tickPositions:t,dataMin:e=0,dataMax:i=0,categories:o}=this,r=this.options.type;if((o?.length||r==="category")&&this.series.find(n=>n.bubblePadding)){let n=t.length;for(;n--;){let s=l[t[n]],a=s.pos||0;(a>i||a<e)&&s.label?.hide()}}}var W=class extends yi{static compose(t,e,i){bs(e,i),zs(ws,"Series.Bubble")&&(qt(t,"foundExtremes",ks),qt(t,"afterRender",Ss))}animate(t){!t&&this.points.length<this.options.animationLimit&&this.points.forEach(function(e){let{graphic:i,plotX:o=0,plotY:r=0}=e;i&&i.width&&(this.hasRendered||i.attr({x:o,y:r,width:1,height:1}),i.animate(this.markerAttribs(e),this.options.animation))},this)}getRadii(){let t=this.getColumn("z"),e=this.getColumn("y"),i=[],o,r,n,s=this.chart.bubbleZExtremes,{minPxSize:a,maxPxSize:h}=this.getPxExtremes();if(!s){let p,d=Number.MAX_VALUE,c=-Number.MAX_VALUE;this.chart.series.forEach(m=>{if(m.bubblePadding&&m.reserveSpace()){let b=(m.onPoint||m).getZExtremes();b&&(d=Math.min(J(d,b.zMin),b.zMin),c=Math.max(J(c,b.zMax),b.zMax),p=!0)}}),p?(s={zMin:d,zMax:c},this.chart.bubbleZExtremes=s):s={zMin:0,zMax:0}}for(r=0,o=t.length;r<o;r++)n=t[r],i.push(this.getRadius(s.zMin,s.zMax,a,h,n,e&&e[r]));this.radii=i}getRadius(t,e,i,o,r,n){let s=this.options,a=s.sizeBy!=="width",h=s.zThreshold,p=e-t,d=.5;if(n===null||r===null)return null;if(Q(r)){if(s.sizeByAbsoluteValue&&(r=Math.abs(r-h),e=p=Math.max(e-h,Math.abs(t-h)),t=0),r<t)return i/2-1;p>0&&(d=(r-t)/p)}return a&&d>=0&&(d=Math.sqrt(d)),Math.ceil(i+d*(o-i))/2}hasData(){return!!this.dataTable.rowCount}markerAttribs(t,e){let i=super.markerAttribs(t,e),{height:o=0,width:r=0}=i;return this.chart.inverted?we(i,{x:(t.plotX||0)-r/2,y:(t.plotY||0)-o/2}):i}pointAttribs(t,e){let i=this.options.marker,o=i?.fillOpacity,r=Cs.prototype.pointAttribs.call(this,t,e);return r["fill-opacity"]=o??1,r}translate(){super.translate.call(this),this.getRadii(),this.translateBubble()}translateBubble(){let{data:t,options:e,radii:i}=this,{minPxSize:o}=this.getPxExtremes(),r=t.length;for(;r--;){let n=t[r],s=i?i[r]:0;this.zoneAxis==="z"&&(n.negative=(n.z||0)<(e.zThreshold||0)),Q(s)&&s>=o/2?(n.marker=we(n.marker,{radius:s,width:2*s,height:2*s}),n.dlBox={x:n.plotX-s,y:n.plotY-s,width:2*s,height:2*s}):(n.shapeArgs=n.plotY=n.dlBox=void 0,n.isInside=!1)}}getPxExtremes(){let t=Math.min(this.chart.plotWidth,this.chart.plotHeight),e=r=>{let n;return typeof r=="string"&&(n=/%$/.test(r),r=parseInt(r,10)),n?t*r/100:r},i=e(J(this.options.minSize,8)),o=Math.max(e(J(this.options.maxSize,"20%")),i);return{minPxSize:i,maxPxSize:o}}getZExtremes(){let t=this.options,e=this.getColumn("z").filter(Q);if(e.length){let i=J(t.zMin,As(Ls(e),t.displayNegative===!1?t.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE)),o=J(t.zMax,Ts(e));if(Q(i)&&Q(o))return{zMin:i,zMax:o}}}searchKDTree(t,e,i,o=ve,r=ve){return o=(n,s,a)=>{let h=n[a]||0,p=s[a]||0,d,c=!1;return h===p?d=n.index>s.index?n:s:h<0&&p<0?(d=h-(n.marker?.radius||0)>=p-(s.marker?.radius||0)?n:s,c=!0):d=h<p?n:s,[d,c]},r=(n,s,a)=>!a&&n>s||n<s,super.searchKDTree(t,e,i,o,r)}};W.defaultOptions=js(yi.defaultOptions,{dataLabels:{formatter:function(){let{numberFormatter:l}=this.series.chart,{z:t}=this.point;return Q(t)?l(t,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),we(W.prototype,{alignDataLabel:Ps.alignDataLabel,applyZones:ve,bubblePadding:!0,isBubble:!0,keysAffectYAxis:["y"],pointArrayMap:["y","z"],pointClass:bi,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),qt(W,"updatedData",l=>{delete l.target.chart.bubbleZExtremes}),qt(W,"remove",l=>{delete l.target.chart.bubbleZExtremes}),I().registerSeriesType("bubble",W);var xi=W,{seriesTypes:{map:{prototype:{pointClass:{prototype:li}}}}}=I(),{extend:Is}=v(),$t=class extends bi{isValid(){return typeof this.z=="number"}};Is($t.prototype,{applyOptions:li.applyOptions,getProjectedBounds:li.getProjectedBounds});var{seriesTypes:{map:{prototype:nt},mappoint:{prototype:Mi}}}=I(),{extend:Bs,merge:Ds}=v(),ht=class extends xi{constructor(){super(...arguments),this.clearBounds=nt.clearBounds}searchPoint(t,e){return this.searchKDTree({plotX:t.chartX-this.chart.plotLeft,plotY:t.chartY-this.chart.plotTop},e,t)}translate(){Mi.translate.call(this),this.getRadii(),this.translateBubble()}};ht.defaultOptions=Ds(xi.defaultOptions,{lineWidth:0,animationLimit:500,joinBy:"hc-key",tooltip:{pointFormat:"{point.name}: {point.z}"}}),Bs(ht.prototype,{type:"mapbubble",axisTypes:["colorAxis"],getProjectedBounds:nt.getProjectedBounds,isCartesian:!1,pointArrayMap:["z"],pointClass:$t,processData:nt.processData,projectPoint:Mi.projectPoint,kdAxisArray:["plotX","plotY"],setData:nt.setData,setOptions:nt.setOptions,updateData:nt.updateData,useMapGeometry:!0,xyFromShape:!0}),I().registerSeriesType("mapbubble",ht);var Os=B.Color,Es=S.n(Os),{scatter:{prototype:{pointClass:Vs}}}=I().seriesTypes,{clamp:Yt,defined:Xs,extend:Ns,pick:Ys}=v(),Jt=class extends Vs{applyOptions(t,e){return(this.isNull||this.value===null)&&delete this.color,super.applyOptions(t,e),this.formatPrefix=this.isNull||this.value===null?"null":"point",this}getCellAttributes(){let t=this.series,e=t.options,i=(e.colsize||1)/2,o=(e.rowsize||1)/2,r=t.xAxis,n=t.yAxis,s=this.options.marker||t.options.marker,a=t.pointPlacementToXValue(),h=Ys(this.pointPadding,e.pointPadding,0),p={x1:Yt(Math.round(r.len-r.translate(this.x-i,!1,!0,!1,!0,-a)),-r.len,2*r.len),x2:Yt(Math.round(r.len-r.translate(this.x+i,!1,!0,!1,!0,-a)),-r.len,2*r.len),y1:Yt(Math.round(n.translate(this.y-o,!1,!0,!1,!0)),-n.len,2*n.len),y2:Yt(Math.round(n.translate(this.y+o,!1,!0,!1,!0)),-n.len,2*n.len)};for(let d of[["width","x"],["height","y"]]){let c=d[0],m=d[1],b=m+"1",u=m+"2",f=Math.abs(p[b]-p[u]),g=s&&s.lineWidth||0,y=Math.abs(p[b]+p[u])/2,x=s&&s[c];if(Xs(x)&&x<f){let M=x/2+g/2;p[b]=y-M,p[u]=y+M}h&&((m==="x"&&r.reversed||m==="y"&&!n.reversed)&&(b=u,u=m+"1"),p[b]+=h,p[u]-=h)}return p}haloPath(t){if(!t)return[];let{x:e=0,y:i=0,width:o=0,height:r=0}=this.shapeArgs||{};return[["M",e-t,i-t],["L",e-t,i+r+t],["L",e+o+t,i+r+t],["L",e+o+t,i-t],["Z"]]}isValid(){return this.value!==1/0&&this.value!==-1/0}};Ns(Jt.prototype,{dataLabelOnNull:!0,moveToTopOnHover:!0,ttBelow:!1});var{isNumber:Gs}=v(),{doc:Ws}=v(),{defined:Fs,pick:hi}=v(),{series:lt,seriesTypes:{column:Rs,scatter:vi}}=I(),{prototype:{symbols:Gt}}=Pe(),{addEvent:Us,extend:Zs,fireEvent:Hs,isNumber:Wt,merge:Ce,pick:Ks}=v(),{colorFromPoint:qs,getContext:$s}={colorFromPoint:function(l,t){let e=t.series.colorAxis;if(e){let i=e.toColor(l||0,t).split(")")[0].split("(")[1].split(",").map(o=>hi(parseFloat(o),parseInt(o,10)));return i[3]=255*hi(i[3],1),Fs(l)&&t.visible||(i[3]=0),i}return[0,0,0,0]},getContext:function(l){let{canvas:t,context:e}=l;return t&&e?(e.clearRect(0,0,t.width,t.height),e):(l.canvas=Ws.createElement("canvas"),l.context=l.canvas.getContext("2d",{willReadFrequently:!0})||void 0,l.context)}},_=class extends vi{constructor(){super(...arguments),this.valueMax=NaN,this.valueMin=NaN,this.isDirtyCanvas=!0}drawPoints(){let t=this,e=t.options,i=e.interpolation,o=e.marker||{};if(i){let{image:r,chart:n,xAxis:s,yAxis:a}=t,{reversed:h=!1,len:p}=s,{reversed:d=!1,len:c}=a,m={width:p,height:c};if(!r||t.isDirtyData||t.isDirtyCanvas){let b=$s(t),{canvas:u,options:{colsize:f=1,rowsize:g=1},points:y,points:{length:x}}=t,M=n.colorAxis&&n.colorAxis[0];if(u&&b&&M){let{min:w,max:C}=s.getExtremes(),{min:T,max:D}=a.getExtremes(),P=C-w,z=D-T,j=Math.round(P/f/8*8),E=Math.round(z/g/8*8),[R,dt]=[[j,j/P,h,"ceil"],[E,E/z,!d,"floor"]].map(([Z,Y,_t,Lt])=>_t?te=>Math[Lt](Z-Y*te):te=>Math[Lt](Y*te)),U=u.width=j+1,ct=U*(u.height=E+1),Qt=(x-1)/ct,Le=new Uint8ClampedArray(4*ct),wi=(Z,Y)=>4*Math.ceil(U*dt(Y-T)+R(Z-w));t.buildKDTree();for(let Z=0;Z<ct;Z++){let Y=y[Math.ceil(Qt*Z)],{x:_t,y:Lt}=Y;Le.set(qs(Y.value,Y),wi(_t,Lt))}b.putImageData(new ImageData(Le,U),0,0),r?r.attr(ie(ee({},m),{href:u.toDataURL("image/png",1)})):(t.directTouch=!1,t.image=n.renderer.image(u.toDataURL("image/png",1)).attr(m).add(t.group))}t.isDirtyCanvas=!1}else(r.width!==p||r.height!==c)&&r.attr(m)}else(o.enabled||t._hasPointMarkers)&&(lt.prototype.drawPoints.call(t),t.points.forEach(r=>{r.graphic&&(r.graphic[t.chart.styledMode?"css":"animate"](t.colorAttribs(r)),r.value===null&&r.graphic.addClass("highcharts-null-point"))}))}getExtremes(){let{dataMin:t,dataMax:e}=lt.prototype.getExtremes.call(this,this.getColumn("value"));return Wt(t)&&(this.valueMin=t),Wt(e)&&(this.valueMax=e),lt.prototype.getExtremes.call(this)}getValidPoints(t,e){return lt.prototype.getValidPoints.call(this,t,e,!0)}hasData(){return!!this.dataTable.rowCount}init(){super.init.apply(this,arguments);let t=this.options;t.pointRange=Ks(t.pointRange,t.colsize||1),this.yAxis.axisPointRange=t.rowsize||1,Gt.ellipse=Gt.circle,t.marker&&Wt(t.borderRadius)&&(t.marker.r=t.borderRadius)}markerAttribs(t,e){let i=t.shapeArgs||{};if(t.hasImage)return{x:t.plotX,y:t.plotY};if(e&&e!=="normal"){let o=t.options.marker||{},r=this.options.marker||{},n=r.states?.[e]||{},s=o.states?.[e]||{},a=(s.width||n.width||i.width||0)+(s.widthPlus||n.widthPlus||0),h=(s.height||n.height||i.height||0)+(s.heightPlus||n.heightPlus||0);return{x:(i.x||0)+((i.width||0)-a)/2,y:(i.y||0)+((i.height||0)-h)/2,width:a,height:h}}return i}pointAttribs(t,e){let i=lt.prototype.pointAttribs.call(this,t,e),o=this.options||{},r=this.chart.options.plotOptions||{},n=r.series||{},s=r.heatmap||{},a=t?.options.borderColor||o.borderColor||s.borderColor||n.borderColor,h=t?.options.borderWidth||o.borderWidth||s.borderWidth||n.borderWidth||i["stroke-width"];if(i.stroke=t?.marker?.lineColor||o.marker?.lineColor||a||this.color,i["stroke-width"]=h,e&&e!=="normal"){let p=Ce(o.states?.[e],o.marker?.states?.[e],t?.options.states?.[e]||{});i.fill=p.color||Es().parse(i.fill).brighten(p.brightness||0).get(),i.stroke=p.lineColor||i.stroke}return i}translate(){let{borderRadius:t,marker:e}=this.options,i=e?.symbol||"rect",o=Gt[i]?i:"rect",r=["circle","square"].indexOf(o)!==-1;for(let n of(this.generatePoints(),this.points)){let s=n.getCellAttributes(),a=Math.min(s.x1,s.x2),h=Math.min(s.y1,s.y2),p=Math.max(Math.abs(s.x2-s.x1),0),d=Math.max(Math.abs(s.y2-s.y1),0);if(n.hasImage=(n.marker?.symbol||i||"").indexOf("url")===0,r){let c=Math.abs(p-d);a=Math.min(s.x1,s.x2)+(p<d?0:c/2),h=Math.min(s.y1,s.y2)+(p<d?c/2:0),p=d=Math.min(p,d)}n.hasImage&&(n.marker={width:p,height:d}),n.plotX=n.clientX=(s.x1+s.x2)/2,n.plotY=(s.y1+s.y2)/2,n.shapeType="path",n.shapeArgs=Ce(!0,{x:a,y:h,width:p,height:d},{d:Gt[o](a,h,p,d,{r:Wt(t)?t:0})})}Hs(this,"afterTranslate")}};_.defaultOptions=Ce(vi.defaultOptions,{animation:!1,borderRadius:0,borderWidth:0,interpolation:!1,nullColor:"#f7f7f7",dataLabels:{formatter:function(){let{numberFormatter:l}=this.series.chart,{value:t}=this.point;return Gs(t)?l(t,-1):""},inside:!0,verticalAlign:"middle",crop:!1,overflow:"allow",padding:0},marker:{symbol:"rect",radius:0,lineColor:void 0,states:{hover:{lineWidthPlus:0},select:{}}},clip:!0,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}},legendSymbol:"rectangle"}),Us(_,"afterDataClassLegendClick",function(){this.isDirtyCanvas=!0,this.drawPoints()}),Zs(_.prototype,{axisTypes:k.seriesMembers.axisTypes,colorKey:k.seriesMembers.colorKey,directTouch:!0,getExtremesFromAll:!0,keysAffectYAxis:["y"],parallelArrays:k.seriesMembers.parallelArrays,pointArrayMap:["y","value"],pointClass:Jt,specialGroup:"group",trackerGroups:k.seriesMembers.trackerGroups,alignDataLabel:Rs.prototype.alignDataLabel,colorAttribs:k.seriesMembers.colorAttribs,getSymbol:lt.prototype.getSymbol}),k.compose(_),I().registerSeriesType("heatmap",_);var L=v();L.ColorMapComposition=k,L.MapChart=L.MapChart||Ft,L.MapNavigation=L.MapNavigation||Zt,L.MapView=L.MapView||et,L.Projection=L.Projection||Mt,L.mapChart=L.Map=L.MapChart.mapChart,L.maps=L.MapChart.maps,L.geojson=Rt.geojson,L.topo2geo=Rt.topo2geo,Rt.compose(L.Chart),ht.compose(L.Axis,L.Chart,L.Legend),Zt.compose(Ft,L.Pointer,L.SVGRenderer),et.compose(Ft);var tr=v();export{tr as default};
